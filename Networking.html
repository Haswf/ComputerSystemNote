<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>Networking</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
svg[id^="mermaidChart"] { line-height: 1em; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}


</style>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = 'is-node'><div class='md-toc' mdtype='toc'><p class="md-toc-content" role="list"><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n4"><a class="md-toc-inner" href="#the-internet">The Internet</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n5"><a class="md-toc-inner" href="#arpanet-1969-1990">ARPANET (1969-1990)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n9"><a class="md-toc-inner" href="#international-network-working-group-1972">International Network Working Group (1972)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n17"><a class="md-toc-inner" href="#nsfnet">NSFNet</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n21"><a class="md-toc-inner" href="#problem">Problem</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n30"><a class="md-toc-inner" href="#network-model">Network Model</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n39"><a class="md-toc-inner" href="#services-and-protocols">Services and Protocols</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n81"><a class="md-toc-inner" href="#tcpip-model">TCP/IP Model</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n90"><a class="md-toc-inner" href="#osi-model">OSI Model</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n124"><a class="md-toc-inner" href="#why-do-we-need-a-model">Why do we need a model?</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n134"><a class="md-toc-inner" href="#advantages-and-disadvantages-of-having-international-standards-for-network-protocols">Advantages and Disadvantages of having international standards for network protocols.</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n150"><a class="md-toc-inner" href="#connection-oriented-and-connectionless-services">Connection-oriented and Connectionless services</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n152"><a class="md-toc-inner" href="#connection-oriented-tcp">Connection Oriented (TCP)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n158"><a class="md-toc-inner" href="#connectionless-udp">Connectionless (UDP)</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n164"><a class="md-toc-inner" href="#the-protocol-stack">The protocol stack</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n166"><a class="md-toc-inner" href="#world-wide-web">World Wide Web</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n167"><a class="md-toc-inner" href="#components">Components </a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n176"><a class="md-toc-inner" href="#architecture">Architecture</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n178"><a class="md-toc-inner" href="#application-layer">Application Layer</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n179"><a class="md-toc-inner" href="#http">HTTP</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n180"><a class="md-toc-inner" href="#overview">Overview</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n198"><a class="md-toc-inner" href="#persistent-vs-non-persistent">Persistent vs. Non-persistent</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n237"><a class="md-toc-inner" href="#summary-of-key-steps">Summary of key steps</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n260"><a class="md-toc-inner" href="#http-methods">HTTP Methods</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n267"><a class="md-toc-inner" href="#http-request">HTTP Request</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n282"><a class="md-toc-inner" href="#http-response-codes">HTTP Response Codes</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n308"><a class="md-toc-inner" href="#http-response">HTTP Response</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n330"><a class="md-toc-inner" href="#http-headers">HTTP Headers</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n332"><a class="md-toc-inner" href="#client-side-processing">Client side processing</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n347"><a class="md-toc-inner" href="#server-side-processing">Server side processing</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n359"><a class="md-toc-inner" href="#multi-threaded-web-server">Multi-threaded Web Server</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n381"><a class="md-toc-inner" href="#web-cache">Web Cache</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n384"><a class="md-toc-inner" href="#web-proxy">Web proxy</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n398"><a class="md-toc-inner" href="#cookies">Cookies</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n428"><a class="md-toc-inner" href="#tracking">Tracking</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n455"><a class="md-toc-inner" href="#urluri">URL/URI</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n475"><a class="md-toc-inner" href="#html">HTML</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n493"><a class="md-toc-inner" href="#xml--xsl">XML &amp; XSL</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n500"><a class="md-toc-inner" href="#xhtml">XHTML</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n506"><a class="md-toc-inner" href="#dynamic-content">Dynamic Content</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n510"><a class="md-toc-inner" href="#client-side-scripting">Client-side Scripting</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n533"><a class="md-toc-inner" href="#domain-name-system">Domain Name System</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n545"><a class="md-toc-inner" href="#elements-of-dns">Elements of DNS</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n555"><a class="md-toc-inner" href="#domain-name">Domain name</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n572"><a class="md-toc-inner" href="#conceptual-division-of-dns-namespace">Conceptual division of DNS Namespace</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n574"><a class="md-toc-inner" href="#top-level-domains">Top-level domains</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n576"><a class="md-toc-inner" href="#resource-records">Resource Records</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n621"><a class="md-toc-inner" href="#inserting-records-into-dns">Inserting records into DNS</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n639"><a class="md-toc-inner" href="#name-server-zones">Name server zones</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n655"><a class="md-toc-inner" href="#types-of-name-servers">Types of name servers</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n676"><a class="md-toc-inner" href="#resolving-a-query">Resolving a query</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n688"><a class="md-toc-inner" href="#dns-security">DNS Security</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n737"><a class="md-toc-inner" href="#email">Email</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n738"><a class="md-toc-inner" href="#user-agents">User agents</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n758"><a class="md-toc-inner" href="#format">Format</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n760"><a class="md-toc-inner" href="#message-header-fields">Message Header Fields</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n762"><a class="md-toc-inner" href="#smtp">SMTP</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n780"><a class="md-toc-inner" href="#mime">MIME</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n794"><a class="md-toc-inner" href="#transfer">Transfer</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n800"><a class="md-toc-inner" href="#delivery">Delivery</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n820"><a class="md-toc-inner" href="#pop3----post-office-protocol">POP3 – Post Office Protocol</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n844"><a class="md-toc-inner" href="#imap----internet-message-access-protocol">IMAP – Internet Message Access Protocol</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n884"><a class="md-toc-inner" href="#presentation-layer">Presentation Layer</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n913"><a class="md-toc-inner" href="#session-layer">Session Layer</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n943"><a class="md-toc-inner" href="#transport-layer">Transport layer</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n944"><a class="md-toc-inner" href="#role">Role</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n966"><a class="md-toc-inner" href="#services">Services</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n994"><a class="md-toc-inner" href="#encapsulation">Encapsulation</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1017"><a class="md-toc-inner" href="#addressing">Addressing</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1034"><a class="md-toc-inner" href="#port-allocations">Port allocations</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1067"><a class="md-toc-inner" href="#multiplexing-demultiplexing">Multiplexing /Demultiplexing</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1074"><a class="md-toc-inner" href="#udp----user-datagram-protocol">UDP – User Datagram Protocol</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1075"><a class="md-toc-inner" href="#connectionless">Connectionless</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1077"><a class="md-toc-inner" href="#strengths">Strengths</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1087"><a class="md-toc-inner" href="#weaknesses">Weaknesses</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1095"><a class="md-toc-inner" href="#applications">Applications</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1117"><a class="md-toc-inner" href="#udp-header">UDP header</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1130"><a class="md-toc-inner" href="#udp-question">UDP Question</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1172"><a class="md-toc-inner" href="#rpc---remote-procedure-calls">RPC - Remote Procedure Calls </a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1198"><a class="md-toc-inner" href="#how-rpc-works">How RPC works?</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1207"><a class="md-toc-inner" href="#challenges">Challenges</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1222"><a class="md-toc-inner" href="#udp-vs-tcp-for-rpc">UDP vs TCP for RPC</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1241"><a class="md-toc-inner" href="#rtp----real-time-transport-protocol-rtp">RTP – Real-Time Transport Protocol (RTP)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1246"><a class="md-toc-inner" href="#which-layer-is-rtp-at">Which layer is RTP at?</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1258"><a class="md-toc-inner" href="#rtp-header">RTP Header</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1268"><a class="md-toc-inner" href="#rtp-playback">RTP Playback</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1281"><a class="md-toc-inner" href="#rtcp---real-time-transport-control-protocol">RTCP - Real-time Transport Control Protocol</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1307"><a class="md-toc-inner" href="#tcp---transmission-control-protocol">TCP - Transmission Control Protocol</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1308"><a class="md-toc-inner" href="#tcp-services">TCP Services</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1324"><a class="md-toc-inner" href="#service-model">Service Model</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1335"><a class="md-toc-inner" href="#tldr">TL;DR</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1378"><a class="md-toc-inner" href="#tcp-header-and-segment">TCP Header and Segment </a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1397"><a class="md-toc-inner" href="#tcp-primitives">TCP Primitives</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1424"><a class="md-toc-inner" href="#tcp-connection">TCP Connection</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1425"><a class="md-toc-inner" href="#features">Features</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1442"><a class="md-toc-inner" href="#issues">Issues</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1455"><a class="md-toc-inner" href="#connection-establishment">Connection establishment</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1456"><a class="md-toc-inner" href="#three-way-handshake">Three-way handshake</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1491"><a class="md-toc-inner" href="#synchronisation">Synchronisation</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1533"><a class="md-toc-inner" href="#retransmission">Retransmission</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1554"><a class="md-toc-inner" href="#closing">Closing</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1587"><a class="md-toc-inner" href="#syn-flooding">SYN Flooding</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1603"><a class="md-toc-inner" href="#tcp-sliding-window">TCP Sliding Window</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1614"><a class="md-toc-inner" href="#send-window">Send window</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1621"><a class="md-toc-inner" href="#receive-window-sliding-window">Receive window (Sliding Window)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1646"><a class="md-toc-inner" href="#potential-for-deadlock">Potential for deadlock</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1666"><a class="md-toc-inner" href="#congestion-control-window-cwnd">Congestion Control Window CWND</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1679"><a class="md-toc-inner" href="#slow-start">Slow-start</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1712"><a class="md-toc-inner" href="#congestion-avoidance-additive-increase">Congestion Avoidance (Additive increase)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1722"><a class="md-toc-inner" href="#fast-recovery">Fast recovery</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1732"><a class="md-toc-inner" href="#further-optimisations">Further Optimisations</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1755"><a class="md-toc-inner" href="#macroscopic-model">Macroscopic model</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1775"><a class="md-toc-inner" href="#tcp-question">TCP Question</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2012"><a class="md-toc-inner" href="#socket-programming">Socket Programming</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2013"><a class="md-toc-inner" href="#berkeley-sockets">Berkeley Sockets</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2038"><a class="md-toc-inner" href="#using-sockets-in-c">Using Sockets in C</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2045"><a class="md-toc-inner" href="#multi-threaded-web-server-n2045">Multi-threaded Web Server</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n2063"><a class="md-toc-inner" href="#git">Git</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2064"><a class="md-toc-inner" href="#what-is-git">What is Git?</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2079"><a class="md-toc-inner" href="#vcs-history">VCS History</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2092"><a class="md-toc-inner" href="#architecture-n2092">Architecture</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2113"><a class="md-toc-inner" href="#storage">Storage</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2129"><a class="md-toc-inner" href="#usage">Usage</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2182"><a class="md-toc-inner" href="#risks">Risks</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2206"><a class="md-toc-inner" href="#git-question">Git Question</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n2228"><a class="md-toc-inner" href="#original-flow--loss-control">Original flow + loss control</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2237"><a class="md-toc-inner" href="#go-back-n">Go-back-N</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2239"><a class="md-toc-inner" href="#sender">Sender</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2248"><a class="md-toc-inner" href="#receiver">Receiver</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2271"><a class="md-toc-inner" href="#selective-repeat">Selective Repeat</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2273"><a class="md-toc-inner" href="#sender-n2273">Sender</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2282"><a class="md-toc-inner" href="#receiver-n2282">Receiver</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2296"><a class="md-toc-inner" href="#congestion-collapse">Congestion collapse</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2306"><a class="md-toc-inner" href="#question">Question </a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n2323"><a class="md-toc-inner" href="#internet-network-layer">Internet (network) Layer</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2324"><a class="md-toc-inner" href="#role-n2324">Role</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2335"><a class="md-toc-inner" href="#where">Where</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2341"><a class="md-toc-inner" href="#services-n2341">Services</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2342"><a class="md-toc-inner" href="#connectionlessdatagram-network">Connectionless(“datagram” network)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2348"><a class="md-toc-inner" href="#connection-orientedvirtual-circuit-network">Connection-oriented(“virtual circuit” network)</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2359"><a class="md-toc-inner" href="#routing">Routing</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2363"><a class="md-toc-inner" href="#routing-table">Routing table</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2385"><a class="md-toc-inner" href="#route-aggregation">Route Aggregation</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2409"><a class="md-toc-inner" href="#routing-algorithm">Routing algorithm</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2438"><a class="md-toc-inner" href="#goal">Goal</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2484"><a class="md-toc-inner" href="#flooding">Flooding</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2505"><a class="md-toc-inner" href="#optimality-principle">Optimality Principle</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2510"><a class="md-toc-inner" href="#sink-tree">Sink Tree</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2516"><a class="md-toc-inner" href="#shortest-path-algorithm">Shortest Path Algorithm</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2527"><a class="md-toc-inner" href="#link-state-routing">Link State Routing</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2600"><a class="md-toc-inner" href="#distance-vector-routing">Distance vector Routing</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2616"><a class="md-toc-inner" href="#border-gateway-protocol-bgp">Border Gateway Protocol (BGP)</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2676"><a class="md-toc-inner" href="#packet-forwarding">Packet forwarding</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2698"><a class="md-toc-inner" href="#connectionless-n2698">Connectionless</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2720"><a class="md-toc-inner" href="#connection-oriented">Connection-oriented</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2732"><a class="md-toc-inner" href="#multiprotocol-label-switching">MultiProtocol Label Switching</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2747"><a class="md-toc-inner" href="#connection-oriented-vs-connectionless">Connection-oriented vs Connectionless</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2781"><a class="md-toc-inner" href="#quality-of-service">Quality of Service</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2782"><a class="md-toc-inner" href="#why-is-quality-of-service-qos-important">Why is Quality of Service (QoS) important</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2801"><a class="md-toc-inner" href="#internet-protocol">Internet Protocol</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2834"><a class="md-toc-inner" href="#ip-addressing">IP Addressing</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2835"><a class="md-toc-inner" href="#ipv4-addresses">IPv4 Addresses</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2853"><a class="md-toc-inner" href="#classes"><strong>Classes</strong></a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2861"><a class="md-toc-inner" href="#classless-inter-domain-routing">Classless Inter Domain Routing</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2894"><a class="md-toc-inner" href="#prefixing">Prefixing</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2934"><a class="md-toc-inner" href="#route-aggregation-n2934">Route aggregation</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2946"><a class="md-toc-inner" href="#special-ip-addresses">Special IP Addresses</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2948"><a class="md-toc-inner" href="#ipv6">IPv6</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2980"><a class="md-toc-inner" href="#ip-header">IP Header</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2983"><a class="md-toc-inner" href="#ip-version-4-protocol">IP Version 4 Protocol</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3016"><a class="md-toc-inner" href="#ip-version-6-protocol">IP Version 6 Protocol</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n3046"><a class="md-toc-inner" href="#subnets">Subnets</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3080"><a class="md-toc-inner" href="#subnet-routing">Subnet Routing</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n3119"><a class="md-toc-inner" href="#network-address-translation-nat">Network Address Translation (NAT)</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3140"><a class="md-toc-inner" href="#how-nat-works">How NAT works</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3165"><a class="md-toc-inner" href="#advantages">Advantages</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3174"><a class="md-toc-inner" href="#criticisms">Criticisms</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n3200"><a class="md-toc-inner" href="#fragmentation">Fragmentation</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3266"><a class="md-toc-inner" href="#fragmentation-and-ip-headers">Fragmentation and IP Headers</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3298"><a class="md-toc-inner" href="#example">Example</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3307"><a class="md-toc-inner" href="#downsides">Downsides</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3318"><a class="md-toc-inner" href="#path-mtu-discovery">Path MTU discovery</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3324"><a class="md-toc-inner" href="#ipv4-vs-ipv6-fragmentation">IPv4 vs. IPv6 Fragmentation</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n3346"><a class="md-toc-inner" href="#ip-multicasting">IP Multicasting</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n3410"><a class="md-toc-inner" href="#congestion-control">Congestion Control</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3420"><a class="md-toc-inner" href="#congestion-control-vs-flow-control">Congestion Control vs. Flow Control</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3452"><a class="md-toc-inner" href="#congestion-control-solutions">Congestion Control Solutions</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3499"><a class="md-toc-inner" href="#explicit-congestion-control---ecn">Explicit Congestion Control - ECN</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n3548"><a class="md-toc-inner" href="#internet-control-protocols">Internet Control Protocols</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3549"><a class="md-toc-inner" href="#icmp----internet-control-message-protocol">ICMP – Internet Control Message Protocol</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3578"><a class="md-toc-inner" href="#traceroute">Traceroute</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3586"><a class="md-toc-inner" href="#dhcp----dynamic-host-configuration-protocol">DHCP – Dynamic Host Configuration Protocol</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3618"><a class="md-toc-inner" href="#how-dhcp-works">How DHCP works?</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3647"><a class="md-toc-inner" href="#arp----address-resolution-protocol-not-strictly-internet-layer">ARP – Address Resolution Protocol (not strictly internet layer)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3661"><a class="md-toc-inner" href="#address-resolution-protocol">Address Resolution Protocol</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3668"><a class="md-toc-inner" href="#how-does-arp-work">How does ARP work?</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n3675"><a class="md-toc-inner" href="#link-layer">Link Layer</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n3695"><a class="md-toc-inner" href="#mac-layer-2-address">MAC (layer-2) Address</a></span></p></div><p>&nbsp;</p><p>&nbsp;</p><h2><a name="the-internet" class="md-header-anchor"></a><span>The Internet</span></h2><h3><a name="arpanet-1969-1990" class="md-header-anchor"></a><span>ARPANET (1969-1990)</span></h3><ul><li><span>TCP/IP was developed at ARPANET</span></li></ul><h3><a name="international-network-working-group-1972" class="md-header-anchor"></a><span>International Network Working Group (1972)</span></h3><ul><li><span>Proposed a packed switched datagram based network standard but rejected</span></li><li><span>designed the OSI</span></li><li><span>By the late 80’s the slow development of the OSI model was leading</span>
<span>to increased frustration</span></li></ul><h3><a name="nsfnet" class="md-header-anchor"></a><span>NSFNet</span></h3><ul><li><span>National Science Foundation was created in 1986 to provide researchers access to supercomputer sites in the USA </span></li></ul><h3><a name="problem" class="md-header-anchor"></a><span>Problem</span></h3><ul><li><p><span>Many of the underlying protocols were designed without consideration for an adversary on the network</span></p><ul><li><span>Security has been retrofitted, with many insecure protocols still widely used (DNS)</span></li></ul></li><li><p><span>The rivalry between the two groups led to TCP/IP working groups rejecting OSI concepts out of principle</span></p></li></ul><h2><a name="network-model" class="md-header-anchor"></a><span>Network Model</span></h2><p><img src="Networking.assets/image-20200623215735002.png" alt="image-20200623215735002" style="zoom: 50%;" /></p><ul><li><span>Model the network as a </span><strong><span>stack</span></strong><span> of layers.</span></li><li><span>Each layer offers services to layers above it.</span></li><li><span>Inter-layer exchanges are conducted according to a protocol.</span></li></ul><h2><a name="services-and-protocols" class="md-header-anchor"></a><span>Services and Protocols</span></h2><p><img src="Networking.assets/image-20200623215753306.png" alt="image-20200623215753306" style="zoom:50%;" /></p><ul><li><p><strong><span>Service</span></strong><span>: set of primitives that a layer provides to a layer </span><strong><span>above</span></strong><span> it</span></p><ul><li><span>interfaces between layers</span></li></ul></li><li><p><strong><span>Protocol</span></strong><span>: rules which govern the format and meaning of packets that are exchanged by peers </span><strong><span>within a layer</span></strong></p><ul><li><span>packets sent between peer entities</span></li></ul></li></ul><blockquote><p><strong><span>Suppose the algorithms used to implement the operations at layer k are changed. Do the implementations of the operations at layers k - 1 and k + 1 need to change accordingly?</span></strong></p><p><span>NO</span></p><ul><li><p><span>It is not necessary to change the layer k + 1 implementations as long as</span></p><ul><li><p><span>layer k still provides the same services to layer k + 1</span></p><ul><li><span>Since the role of layer k is to provide services to the</span>
<span>layer k + 1 as long as the API&#39;s of the services have not been changed,</span>
<span>there is no need for the layer k + 1 to change its implementations.</span></li></ul></li><li><p><span>layer k still only uses services provided by layer k - 1</span></p></li></ul></li><li><p><span>The change in algorithm at layer k may change which services are used layer k - 1 and how often they are made</span></p><ul><li><span>may change the costs of the services it provides to layer k + 1. </span></li><li><span>these layers may choose to re-optimise the way they implement their services.</span></li></ul></li></ul></blockquote><blockquote><p><strong><span>Suppose there is a change in the service (set of operations) provided by layer k.</span></strong><span> </span></p><p><strong><span>How does this impact services at layers k - 1 and k + 1?</span></strong></p><ul><li><span>k - 1: No impact</span></li><li><span>k + 1: Have to be reimplemented</span></li></ul></blockquote><h3><a name="tcpip-model" class="md-header-anchor"></a><span>TCP/IP Model</span></h3><p><img src="Networking.assets/image-20200623220114430.png" referrerpolicy="no-referrer" alt="image-20200623220114430"></p><ul><li><span>Transmission Control Protocol/Internet Protocol – was designed to be independent of data link and physical layers</span></li><li><span>The TCP/IP model reflects what happens on the internet</span></li><li><span>TCP/IP effectively standardised post implementation</span></li></ul><h3><a name="osi-model" class="md-header-anchor"></a><span>OSI Model</span></h3><p><img src="Networking.assets/image-20200623220050056.png" referrerpolicy="no-referrer" alt="image-20200623220050056"></p><ul><li><p><span>OSI standardised pre-implementation, but not widely implemented</span></p></li><li><p><span>OSI helps reflect the thought process that should be followed when designing a network or diagnosing a fault</span></p><ul><li><span>It remains at the core of a number accreditation schemes</span></li></ul></li><li><p><span>View the OSI model as idealised, but with a degree of flexibility</span></p></li><li><p><strong><span>Layer</span></strong><span>: A layer should be created where a different abstraction is needed.</span></p></li><li><p><strong><span>Functionality</span></strong><span>: </span></p><ul><li><span>Each layer should perform a well defined function.</span></li><li><span>The function of each layer should be chosen with a view</span>
<span>toward defining internationally standardised protocols</span></li></ul></li><li><p><strong><span>layer boundaries</span></strong><span>: The layer boundaries should be chosen to minimise the</span>
<span>information flow across the interfaces.</span></p></li><li><p><strong><span>The number of layers</span></strong><span> should be large enough that distinct functions need not to be thrown together in the same layer out of necessity, and small enough that the architecture does not become unwieldy.</span></p></li><li><p><strong><span>Why did the OSI initiative fail</span></strong><span>?</span></p><ul><li><span>Politics? Poor design? Vested interests? Bad timing?</span></li><li><span>Design by committee – too open</span></li><li><span>In software engineering terms: Waterfall vs agile</span></li></ul></li></ul><h3><a name="why-do-we-need-a-model" class="md-header-anchor"></a><span>Why do we need a model?</span></h3><ul><li><span>Interoperability – Open, ideally not proprietary</span></li><li><span>A reference model to develop and validate against independently</span></li><li><span>Since networks are multi-dimensional, a reference model can serve</span>
<span>to simplify the design process.</span></li><li><span>It’s engineering best practice to have an abstract reference model,</span>
<span>and a reference model and corresponding implementations are</span>
<span>always required for validation purposes</span></li></ul><h3><a name="advantages-and-disadvantages-of-having-international-standards-for-network-protocols" class="md-header-anchor"></a><span>Advantages and Disadvantages of having international standards for network protocols.</span></h3><p><strong><span>Advantage</span></strong></p><ul><li><span>if everyone uses the standard, everyone can talk to everyone.</span></li><li><span>widespread use of any standard will give it economies of scale, as with VLSI chips.</span></li></ul><p><strong><span>Disadvantage</span></strong></p><ul><li><p><span>Political compromises necessary to achieve standardization frequently lead to poor standards.</span></p></li><li><p><span>Once a standard has been widely adopted, it is difficult to change, even if new and better techniques or methods are discovered.</span></p><ul><li><span>Also, by the time it has been accepted, it may be obsolete.</span></li></ul></li></ul><h2><a name="connection-oriented-and-connectionless-services" class="md-header-anchor"></a><span>Connection-oriented and Connectionless services</span></h2><p><span>The choice of service type affects the reliability, quality and cost of the service itself.</span></p><h3><a name="connection-oriented-tcp" class="md-header-anchor"></a><span>Connection Oriented (TCP)</span></h3><ul><li><span>connect, use, disconnect</span></li><li><span>negotiation inherent in connection setup similar to telephone</span>
<span>service</span></li></ul><h3><a name="connectionless-udp" class="md-header-anchor"></a><span>Connectionless (UDP)</span></h3><ul><li><span>Use message routed through intermediate nodes</span></li><li><span>similar to postal service or text message</span></li></ul><h2><a name="the-protocol-stack" class="md-header-anchor"></a><span>The protocol stack</span></h2><p><img src="Networking.assets/image-20200623220136817.png" alt="image-20200623220136817" style="zoom:50%;" /></p><h2><a name="world-wide-web" class="md-header-anchor"></a><span>World Wide Web</span></h2><h3><a name="components" class="md-header-anchor"></a><span>Components </span></h3><p><img src="Networking.assets/image-20200623220713752.png" alt="image-20200623220713752" style="zoom:50%;" /></p><ul><li><span>Client - typically a browser based access to pages</span></li><li><span>Server - daemon based content delivery of pages</span></li><li><span>URL ≈ Protocol + DNS Name + file name</span></li></ul><h3><a name="architecture" class="md-header-anchor"></a><span>Architecture</span></h3><p><img src="Networking.assets/image-20200623220804780.png" alt="image-20200623220804780" style="zoom:50%;" /></p><h1><a name="application-layer" class="md-header-anchor"></a><span>Application Layer</span></h1><h2><a name="http" class="md-header-anchor"></a><span>HTTP</span></h2><h3><a name="overview" class="md-header-anchor"></a><span>Overview</span></h3><ol start='' ><li><span>Client </span><strong><span>initiates</span></strong><span> TCP connection (creates socket) to server, port 80</span></li><li><span>Server </span><strong><span>accepts</span></strong><span> TCP connection from client</span></li><li><span>HTTP messages (application-layer protocol messages) </span><strong><span>exchanged</span></strong><span> between browser (HTTP client) and Web server (HTTP server)</span></li><li><span>TCP connection </span><strong><span>closed</span></strong></li></ol><p><span>Connections</span></p><ul><li><span>HTTP 1.0 – single use connection</span></li><li><span>HTTP 1.1 – persistent connections, additional headers</span></li><li><span>HTTP/2 – 2015 – Further speed improvements (origins in SPDY)</span></li></ul><h3><a name="persistent-vs-non-persistent" class="md-header-anchor"></a><span>Persistent vs. Non-persistent</span></h3><figure><table><thead><tr><th><span>Non-persistent</span></th><th><span>Persistent</span></th></tr></thead><tbody><tr><td><span>requires 2 “response times”  (one to initiate TCP connection and one for initial HTTP request) per object + file transmission time</span></td><td><span>server leaves connection open after sending response</span></td></tr><tr><td><span>OS overhead for each TCP connection</span></td><td><span>subsequent HTTP messages between same client/server sent over open connection</span></td></tr><tr><td><span>browsers often open parallel TCP connections to fetch referenced objects</span></td><td><span>client sends requests as soon as it encounters a referenced object,reducing overall response time</span></td></tr></tbody></table></figure><p><img src="Networking.assets/image-20200623221254485.png" referrerpolicy="no-referrer" alt="image-20200623221254485"></p><p><img src="Networking.assets/image-20200623221341633.png" alt="image-20200623221341633" style="zoom:50%;" /></p><ul><li><span>(a) multiple connections and sequential requests.</span></li><li><span>(b) A persistent connection and sequential requests.</span></li><li><span>(c) A persistent connection and pipelined requests.</span></li></ul><blockquote><p><span>Tutorial 2 Question 8</span></p><p><strong><span>(c) With non-persistent connections between browser and origin server, it is possible for a single TCP connection to carry two distinct HTTP request messages.</span></strong></p><p><span>False.</span></p><ul><li><span>In a non-persistent connection, the connection is terminated once the</span>
<span>object has been successfully received by the client. </span></li><li><span>The second HTTP request method will require a new TCP connection to be established.</span></li><li><span>TL;DR one connection, one message, one response.</span></li></ul><p><strong><span>(b) Two distinct Web pages (for example, </span><a href='http://cis.unimelb.edu.au/research/' target='_blank' class='url'>http://cis.unimelb.edu.au/research/</a></strong>
<strong><span>and </span><a href='http://cis.unimelb.edu.au/people' target='_blank' class='url'>http://cis.unimelb.edu.au/people</a><span>) can be sent over the same persistent connection.</span></strong></p><p><span>True</span></p><ul><li><span>Multiple Web pages residing on the same server can be sent from the server to the same client over a single persistent TCP connection.</span></li></ul></blockquote><h3><a name="summary-of-key-steps" class="md-header-anchor"></a><span>Summary of key steps</span></h3><ul><li><p><span>Steps that occur when a link is selected</span></p><ol start='' ><li><span>Browser determines the URL</span></li><li><span>Browser asks DNS for the IP address of the server (Resolving URL)</span></li><li><span>DNS replies</span></li><li><span>The browser makes a TCP connection</span></li><li><span>Sends HTTP request for the page</span></li><li><span>Server sends the page as HTTP response</span></li><li><span>Browser fetches other URLs as needed</span></li><li><span>The browser displays the page (progressively, as content arrives)</span></li><li><span>The TCP connections are closed</span></li></ol></li></ul><h3><a name="http-methods" class="md-header-anchor"></a><span>HTTP Methods</span></h3><p><img src="Networking.assets/image-20200623221818361.png" alt="image-20200623221818361" style="zoom:50%;" /></p><ul><li><strong><span>Idempotent 幂等性</span></strong><span> : multiple identical requests have same effect</span></li><li><strong><span>Safe</span></strong><span>: Only for information retrieval, should not change state</span></li></ul><h3><a name="http-request" class="md-header-anchor"></a><span>HTTP Request</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="http"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="http"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">GET</span> <span class="cm-string-2">/somedir/page.html</span> <span class="cm-keyword">HTTP/1.1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Host:</span><span class="cm-string"> www.somesite.com.au</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">User-agent:</span><span class="cm-string"> Mozilla/4.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Connection:</span><span class="cm-string"> close</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Accept-language:</span><span class="cm-string"> fr</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">Blank line (2 LF or 2 CR/LF) indicates end of message</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 137px;"></div><div class="CodeMirror-gutters" style="display: none; height: 137px;"></div></div></div></pre><blockquote><p><span>Tutorial 2 Question 7</span></p><p><span>Consider the following string of ASCII characters that were captured by</span>
<span>Wireshark when the browser sent an HTTP GET message (i.e., this is the</span>
<span>actual content of an HTTP GET message). The characters crlf are carriage return and line-feed characters Answer the following questions, indicating where in the HTTP GET message below you find the answer.</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="http" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="http"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">GET</span> <span class="cm-string-2">/people/index.html</span> <span class="cm-error">HTTP/1.1&lt;cr&gt;&lt;lf&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Host:</span><span class="cm-string"> cis.unimelb.edu.au&lt;cr&gt;&lt;lf&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Connection:</span><span class="cm-string"> keep-alive&lt;cr&gt;&lt;lf&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Cache-Control:</span><span class="cm-string"> max-age=0&lt;cr&gt;&lt;lf&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Upgrade-Insecure-Requests:</span><span class="cm-string"> 1&lt;cr&gt;&lt;lf&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">User-Agent:</span><span class="cm-string"> Mozilla/5.0 (Windows NT 6.1; Win64; x64)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36&lt;cr&gt;&lt;lf&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Accept:</span><span class="cm-string"> text/html,application/xhtml+xml,application/xml;q=0.9,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">image/webp,image/apng,*/*;q=0.8&lt;cr&gt;&lt;lf&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Accept-Encoding:</span><span class="cm-string"> gzip, deflate&lt;cr&gt;&lt;lf&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Accept-Language:</span><span class="cm-string"> en-AU,en;q=0.9&lt;cr&gt;&lt;lf&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">&lt;cr&gt;&lt;lf&gt;```</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(a) What is the URL of the document requested by the browser?</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">http://cis.unimelb.edu.au/people/index.html</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(b) What version of HTTP is the browser running?</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">HTTP/1.1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(c) Does the browser request a non-persistent or a persistent connection?</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Connection: keep-alive</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(d) What is the IP address of the host on which the browser is running?</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Not presented in the given http request. Need to inspect IP header</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(e) What type of browser initiates this message? Why is the browser</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">type needed in an HTTP request message?</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Google Chrome, but that isn't obvious because it identi<span class="cm-invalidchar" title="\uc" aria-label="\uc" cm-text="">•</span>es itself as</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">four different browsers.</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">The browser type information is needed by the server to send di<span class="cm-invalidchar" title="\ub" aria-label="\ub" cm-text="">•</span>erent</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">versions of the same object to dierent types of browsers.</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 617px;"></div><div class="CodeMirror-gutters" style="display: none; height: 617px;"></div></div></div></pre></blockquote><blockquote><p><span>Tutorial 2 Question 8</span></p><p><span>(a) A user requests a Web page that consists of some text and three images. For this page, the client will send one request message and receive four response messages.</span></p><p><span>False</span></p><ul><li><span>Each object requires a separate request message specifying the URI</span>
<span>of the object. </span></li><li><span>TL;DR: one request, one response</span></li></ul></blockquote><h3><a name="http-response-codes" class="md-header-anchor"></a><span>HTTP Response Codes</span></h3><figure><table><thead><tr><th><span>Code</span></th><th><span>Meaning</span></th><th><span>Examples</span></th></tr></thead><tbody><tr><td><span>1xx</span></td><td><span>Information</span></td><td><span>100 – server agrees to handle client’s request</span></td></tr><tr><td><span>2xx</span></td><td><span>Success</span></td><td><span>200 = request succeeded; 204 = no content present</span></td></tr><tr><td><span>3xx</span></td><td><span>Redirection</span></td><td><span>301 = page moved; 304 = cached page still valid</span></td></tr><tr><td><span>4xx</span></td><td><span>Client error</span></td><td><span>403 = forbidden page; 404 = page not found</span></td></tr><tr><td><span>5xx</span></td><td><span>Server error</span></td><td><span>500 = internal server error; 503 try again later</span><br><span>18</span></td></tr></tbody></table></figure><h3><a name="http-response" class="md-header-anchor"></a><span>HTTP Response</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="http" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="http"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">HTTP/1.1</span> <span class="cm-positive cm-success">200</span> OK\r\n</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Server:</span><span class="cm-string"> nginx\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Content-Type:</span><span class="cm-string"> text/html; charset=UTF-8\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Transfer-Encoding:</span><span class="cm-string"> chunked\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Connection:</span><span class="cm-string"> keep-alive\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Vary:</span><span class="cm-string"> Accept-Encoding\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Cache-Control:</span><span class="cm-string"> max-age=86400, public\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Date:</span><span class="cm-string"> Tue, 23 Jun 2020 12:16:31 GMT\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">X-Drupal-Dynamic-Cache:</span><span class="cm-string"> MISS\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Link:</span><span class="cm-string"> &lt;http://www.voycn.com/article/gaobingfahexinjishu-midengxing-yu-fenbushisuo&gt;; rel="canonical"\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Link:</span><span class="cm-string"> &lt;http://www.voycn.com/article/gaobingfahexinjishu-midengxing-yu-fenbushisuo&gt;; rel="revision"\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">X-UA-Compatible:</span><span class="cm-string"> IE=edge\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Content-language:</span><span class="cm-string"> zh-hans\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">X-Content-Type-Options:</span><span class="cm-string"> nosniff\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">X-Frame-Options:</span><span class="cm-string"> SAMEORIGIN\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Expires:</span><span class="cm-string"> Sun, 19 Nov 1978 05:00:00 GMT\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Last-Modified:</span><span class="cm-string"> Tue, 23 Jun 2020 12:16:30 GMT\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">ETag:</span><span class="cm-string"> W/"1592914590"\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Vary:</span><span class="cm-string"> Cookie\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">X-Generator:</span><span class="cm-string"> Drupal 8 (https://www.drupal.org)\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">X-Drupal-Cache:</span><span class="cm-string"> HIT\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">Content-Encoding:</span><span class="cm-string"> gzip\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">\r\n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 594px;"></div><div class="CodeMirror-gutters" style="display: none; height: 594px;"></div></div></div></pre><blockquote><p><span>Tutorial 2 Question 8</span></p><p><strong><span>(d) The Date: header in the HTTP response message indicates when the object in the response was last modified.</span></strong></p><p><span>False. </span></p><ul><li><span>The Date: header line indicates the time and date when the HTTP</span>
<span>response was created and sent by the server.</span></li><li><span>The Last-Modified: header line indicates the time and date when the</span>
<span>object was created or last modified.</span></li></ul><p><strong><span>(e) HTTP response messages never have an empty message body.</span></strong></p><p><span>False.</span></p><ul><li><span>For response messages, whether or not a message-body is included with a message is dependent on both the request method and the response status code.</span></li><li><span>All responses to the HEAD request method </span><strong><span>MUST NOT</span></strong><span> include a message-body</span></li><li><span>All 1xx (in-formational), 204 (no content), and 304 (not modied) responses</span>
<strong><span>MUST NOT</span></strong><span> include a message-body.</span></li><li><span>All other responses do include a message-body, although it MAY be of zero length.</span></li></ul></blockquote><h3><a name="http-headers" class="md-header-anchor"></a><span>HTTP Headers</span></h3><h2><a name="client-side-processing" class="md-header-anchor"></a><span>Client side processing</span></h2><p><img src="Networking.assets/image-20200623225505230.png" alt="image-20200623225505230" style="zoom:50%;" /></p><ul><li><p><span>Plugins/Extensions - integrated software module which executes inside the browser</span></p><ul><li><span>direct access to online context</span></li></ul></li><li><p><span>Helper - separate program which can be instantiated by the browser, but can only access local cache of file content</span></p><ul><li><span>application/pdf</span></li><li><span>application/msword</span></li></ul></li></ul><h2><a name="server-side-processing" class="md-header-anchor"></a><span>Server side processing</span></h2><ol start='' ><li><span>Accept TCP Connection from client (browser)</span></li><li><span>Identify the file requested</span></li><li><span>Get the specified file from the local storage (disk, RAM, …)</span></li><li><span>Send the file to the client</span></li><li><span>Release the TCP connection</span></li></ol><h2><a name="multi-threaded-web-server" class="md-header-anchor"></a><span>Multi-threaded Web Server</span></h2><p><img src="Networking.assets/image-20200623225921742.png" alt="image-20200623225921742" style="zoom:50%;" /></p><ul><li><p><span>A multithreaded Web server with a front end and processing modules.</span></p></li><li><p><span>A processing module performs a series of steps:</span></p><ol start='' ><li><span>Resolve name of Web page requested.</span></li><li><span>Perform access control on the Web page</span></li><li><span>Check the cache</span></li><li><span>Fetch requested page from disk or run program</span></li><li><span>Determine the rest of the response</span></li><li><span>Return the response to the client</span></li><li><span>Make an entry in the server log</span></li></ol></li></ul><h2><a name="web-cache" class="md-header-anchor"></a><span>Web Cache</span></h2><p><img src="Networking.assets/image-20200623230329887.png" alt="image-20200623230329887" style="zoom:50%;" /></p><p><strong><span>Goal</span></strong><span>: satisfy client request without involving origin server - reduce response time.</span></p><h2><a name="web-proxy" class="md-header-anchor"></a><span>Web proxy</span></h2><ul><li><p><strong><span>Purpose</span></strong><span>: used for </span><strong><span>caching</span></strong><span>, </span><strong><span>security</span></strong><span> and </span><strong><span>IP address sharing</span></strong></p></li><li><p><span>The browser sends all HTTP requests to the proxy. </span></p><ul><li><span>The proxy returns objects in its cache </span></li><li><span>or the proxy requests object from origin server, then returns object to client.</span></li></ul></li><li><p><span>Note: the proxy server acts as both client and server.</span></p></li></ul><p><img src="Networking.assets/image-20200623230401603.png" alt="image-20200623230401603" style="zoom:50%;" /></p><h2><a name="cookies" class="md-header-anchor"></a><span>Cookies</span></h2><p><img src="Networking.assets/image-20200623231046428.png" referrerpolicy="no-referrer" alt="image-20200623231046428"></p><ul><li><p><span>HTTP is a stateless protocol</span></p><ul><li><span>The network stores no state about web sessions</span></li></ul></li><li><p><span>Cookies can place small amount (&lt;4Kb) of information on the users computer and re-use deterministically (RFC 2109)</span></p></li><li><p><strong><span>Cookies have 5 fields</span></strong></p><ul><li><span>domain</span></li><li><span>path</span></li><li><span>content</span></li><li><span>expiry</span></li><li><span>security</span></li></ul></li><li><p><strong><span>How to keep state</span></strong></p><ul><li><span>maintain state at sender/receiver over multiple transactions</span></li></ul></li><li><p><span>http messages carry “state”</span></p></li></ul><h3><a name="tracking" class="md-header-anchor"></a><span>Tracking</span></h3><ul><li><p><span>Questionable mechanism for tracking users and learning about user behaviour</span></p></li><li><p><span>Tracking companies have expanded beyond simple cookies</span></p><ul><li><span>Plug-in, browser fingerprinting</span></li></ul></li></ul><blockquote><p><strong><span>Consider an e-commerce site that wants to keep a purchase record for each</span></strong>
<strong><span>of its customers. Describe how this can be done with cookies.</span></strong></p><ul><li><p><span>When the user first visits the site, the server </span></p><ul><li><span>creates  a unique identification number</span></li><li><span>creates an entry in its back-end database</span></li><li><span>returns this identication number as a cookie number.</span></li></ul></li><li><p><span>This cookie number is stored on the users host and is managed by the browser.</span></p></li><li><p><span>During each subsequent visit (and purchase), the browser sends the cookie number back to</span>
<span>the site. </span></p></li><li><p><span>Thus the site knows when this user (more precisely, this browser) is visiting the site.</span></p></li></ul></blockquote><h2><a name="urluri" class="md-header-anchor"></a><span>URL/URI</span></h2><ul><li><p><span>Uniform Resource Locator</span></p><ul><li><span>Defined in original HTTP specification</span></li><li><span>An address for a resource</span></li><li><span>Can be relative “./nextpage.html” or absolute</span>
<span>“</span><a href='http://www.google.com' target='_blank' class='url'>http://www.google.com</a><span>”</span></li></ul></li><li><p><span>Separate specification by W3C in 1998 for URI</span></p><ul><li><span>Uniform Resource Identifier</span></li><li><code>scheme:[//[user[:password]@]host[:port]][/path][?query][#fragment]</code></li><li><code>abc://username:password@example.com:123/path/data?key=value#fragid1</code></li></ul></li></ul><h2><a name="html" class="md-header-anchor"></a><span>HTML</span></h2><ul><li><p><span>a simple mark-up language designed to encode both content and presentational information.</span></p></li><li><p><span>Plain text encoding, with browser based rendering</span></p></li><li><p><strong><span>Components</span></strong></p><ul><li><span>Head </span><head><span> ... </span></head></li><li><span>Body </span><body><span> ... </span></body></li></ul></li><li><p><span>Syntactically Restricted Tag Sets</span></p></li><li><p><span>Attributes &amp; Values </span><img src="pic1.gif" alt="pic1.gif"></p></li></ul><p><img src="Networking.assets/image-20200623232824349.png" alt="image-20200623232824349" style="zoom:50%;" /></p><h2><a name="xml--xsl" class="md-header-anchor"></a><span>XML &amp; XSL</span></h2><p><span>XML (Extensible Markup Language) &amp; XSL (Extensible Stylesheet Language)</span></p><ul><li><span>Primary feature: separation of content and presentational markup</span></li><li><span>Stringent validation requirements</span></li></ul><h2><a name="xhtml" class="md-header-anchor"></a><span>XHTML</span></h2><ul><li><span>Essentially an expression of HTML 4.0 as valid XML</span></li><li><span>Major differences to HTML 4.0 are the requirements for conformance(一致性), case folding, well-formedness, attribute specification, nesting and embedding, and inclusion of a document type identifier</span></li></ul><h2><a name="dynamic-content" class="md-header-anchor"></a><span>Dynamic Content</span></h2><p><img src="Networking.assets/image-20200623233004254.png" alt="image-20200623233004254" style="zoom:50%;" /></p><p><img src="Networking.assets/image-20200623233007383.png" alt="image-20200623233007383" style="zoom:50%;" /></p><p><span>![image-20200623233011163](Note.assets/image-20200623233011163.png</span></p><h2><a name="client-side-scripting" class="md-header-anchor"></a><span>Client-side Scripting</span></h2><p><img src="Networking.assets/image-20200623233037433.png" alt="image-20200623233037433" style="zoom:50%;" /></p><p><span>Technologies for producing interactive web applications include:</span></p><ul><li><p><span>JavaScript</span></p></li><li><p><span>Java Applets - compiled Java code (platform independent)</span></p></li><li><p><span>ActiveX - compiled code for Windows</span></p></li><li><p><span>AJAX</span></p><ul><li><span>HTML and CSS: present information as pages.</span></li><li><span>DOM: change parts of pages while they are viewed.</span></li><li><span>XML: let programs exchange data with the server.</span></li><li><span>An asynchronous way to send and retrieve XML data.</span></li><li><span>JavaScript as a language to bind all this together</span></li></ul></li></ul><h2><a name="domain-name-system" class="md-header-anchor"></a><span>Domain Name System</span></h2><ul><li><p><span>We use DNS to resolve the URL to an absolute IP address</span></p><ul><li><span>DNS is the technology behind mapping host.domain.com to an IP address.</span></li></ul></li><li><p><span>an IP addresses </span><strong><span>should uniquely</span></strong><span> identify a socket/jack (or wireless interface) on a computer</span></p><ul><li><span>Often not the case today</span></li></ul></li></ul><h3><a name="elements-of-dns" class="md-header-anchor"></a><span>Elements of DNS</span></h3><ul><li><strong><span>Domain name space</span></strong><span>: DNS uses a tree-structured name space to identify resources on the Internet.</span></li><li><strong><span>DNS database</span></strong><span>: Each node/leaf in the name space tree names a set of information that is contained in a resource record (RR). The collection of all RRs is organized into a distributed database.</span></li><li><strong><span>Name servers</span></strong><span>: Server programs that hold information about a portion of the domain name tree structure and the associated RRs.</span></li><li><strong><span>Resolvers</span></strong><span>: These are programs that extract information from name servers in response to client requests.</span></li></ul><h3><a name="domain-name" class="md-header-anchor"></a><span>Domain name</span></h3><ul><li><p><span>are case insensitive</span></p></li><li><p><span>can have up to 63 characters per constituent</span></p></li><li><p><span>can have up to 255 chars per path</span></p></li><li><p><span>can be internationalised (since 1999) – caused security problems</span></p></li><li><p><span>Naming conventions often follow either organisational or</span>
<span>physical boundaries e.g.,</span></p><ul><li><span>au.ibm.com / uk.ibm.com (for email)</span></li><li><span>ibm.com.au / ibm.co.uk (for web)</span></li></ul></li></ul><h3><a name="conceptual-division-of-dns-namespace" class="md-header-anchor"></a><span>Conceptual division of DNS Namespace</span></h3><p><img src="Networking.assets/image-20200623234129193.png" alt="image-20200623234129193" style="zoom:50%;" /></p><h3><a name="top-level-domains" class="md-header-anchor"></a><span>Top-level domains</span></h3><p><img src="Networking.assets/image-20200623234145520.png" alt="image-20200623234145520" style="zoom:50%;" /></p><h3><a name="resource-records" class="md-header-anchor"></a><span>Resource Records</span></h3><p><img src="Networking.assets/image-20200623234208358.png" alt="image-20200623234208358" style="zoom:50%;" /></p><p><img src="Networking.assets/image-20200623234336910.png" alt="image-20200623234336910" style="zoom: 50%;" /></p><blockquote><p><span>Tutorial 3 Question 5</span></p><p><strong><span>Is it possible for an organizations Web server and mail server to have exactly the same alias for a hostname (for example, foo.com)? How does a DNS server distinguish these two types of mapping, namely, hostname-web server IP and hostname-mail server IP?</span></strong></p><ul><li><p><span>Yes an organization&#39;s mail server and Web server can have the same alias for a host name.</span></p></li><li><p><span>Instead of simply storing the (hostname, IP) mappings, DNS servers store a four tuple called</span>
<span>resource record (RR): (Name, Value, Type, TTL) in their database. We ignore the eld TTL</span>
<span> here. Depending on the Type field, the tuple can have different meanings:</span></p></li><li><p><span>A: </span></p><ul><li><span>Name is a hostname</span></li><li><span>Value is the IP address for the hostname.</span></li><li><span>Thus, a Type A record provides the standard hostname-to-IP address mapping. As an example, (relay1.bar.foo.com, 145.37.93.126, A) is a Type A record.</span></li></ul></li><li><p><span>NS: </span></p><ul><li><span>Name is a domain (such as foo.com) and</span></li><li><span>Value is the hostname of an authoritative DNS server that knows how to obtain the IP addresses for hosts in the domain. </span></li><li><span>This record is used to route DNS queries further along in the query chain. As</span>
<span>an example, (foo.com, dns.foo.com, NS) is a Type NS record.</span></li></ul></li><li><p><span>CNAME: </span></p><ul><li><span>Value is a canonical hostname for the alias hostname Name. </span></li><li><span>This record can provide querying hosts the canonical name for a hostname. As an example, (foo.com, relay1.bar.foo.com, CNAME) is a CNAME record.</span></li></ul></li><li><p><span>MX: </span></p><ul><li><span>Value is the canonical name of a mail server that has an alias hostname</span>
<span>Name. As an example, (foo.com, mail.bar.foo.com, MX) is an MX record. </span></li><li><span>MX records allow the hostnames of mail servers to have simple aliases. </span></li><li><span>Note that by using the MX record, a company can have the same aliased name for its mail server and for one of its other servers (such as its Web server). To obtain the canonical name for the mail server, a DNS client would query for an MX record; to obtain the canonical name for the other server, the DNS client would query for the CNAME record.</span></li></ul></li></ul></blockquote><h3><a name="inserting-records-into-dns" class="md-header-anchor"></a><span>Inserting records into DNS</span></h3><ul><li><p><span>Provide names, IP addresses of authoritative name server (primary and secondary)</span></p></li><li><p><span>registrar inserts two RRs into com TLD server:</span></p><ul><li><span>(networkutopia.com, dns1.networkutopia.com, NS)</span></li><li><span>(dns1.networkutopia.com, 212.212.212.1, A)</span></li></ul></li><li><p><span>create authoritative server</span></p><ul><li><span>Type A record for </span><a href='http://www.networkuptopia.com' target='_blank' class='url'>www.networkuptopia.com</a><span>;</span></li><li><span>Type MX record for networkutopia.com</span></li></ul></li></ul><h3><a name="name-server-zones" class="md-header-anchor"></a><span>Name server zones</span></h3><p><strong><span>Zones</span></strong></p><ul><li><p><span>DNS namespace is divided into overlapping zones.</span></p></li><li><p><span>The name servers are authoritative for that zone.</span></p><ul><li><span>usually two name servers for a zone</span></li></ul></li><li><p><span>Name servers are arranged hierarchically from a set of root servers</span></p></li></ul><p><strong><span>Root name servers</span></strong></p><ul><li><span>The root servers form the authoritative cluster for enquiries. The</span>
<span>root servers are contacted by a local name server that can not</span>
<span>resolve name.</span></li></ul><h3><a name="types-of-name-servers" class="md-header-anchor"></a><span>Types of name servers</span></h3><ul><li><p><strong><span>Top-level domain DNS servers</span></strong></p><ul><li><span>responsible for com, org, net, edu, etc, and all top-level country domains uk, fr, au, jp</span></li></ul></li><li><p><strong><span>Authoritative DNS servers</span></strong><span>: </span></p><ul><li><span>organizations DNS servers, </span><strong><span>providing authoritative hostname to IP mappings for</span></strong>
<strong><span>organizations servers</span></strong><span> (e.g., Web, mail). </span></li><li><span>Can be maintained by organization or service provider.</span></li></ul></li><li><p><strong><span>Local DNS server</span></strong><span>(not strictly part of the hierarchy)</span></p><ul><li><span>Typically, each ISP (residential ISP, company, university) has a</span>
<span>“default name server” which handles DNS queries </span></li><li><span>a query is sent to its local DNS server acts as proxy, forwards query into hierarchy</span></li></ul></li></ul><h3><a name="resolving-a-query" class="md-header-anchor"></a><span>Resolving a query</span></h3><ul><li><p><span>A </span><strong><span>resolver</span></strong><span> client asks the local DNS for the domain to IP mapping</span></p><ul><li><span>if answer is known by the local DNS, then it sends the answer.</span></li><li><span>if answer is not known, then the local DNS queries up the hierarchy to the top level (root) DNS for the domain and then relays the answer to the resolver client.</span></li></ul></li><li><p><span>Essentially, this is a recursive query mode. Queries are subject to timers to avoid longer than necessary response times.</span></p></li></ul><p><img src="Networking.assets/image-20200623235249999.png" alt=" " style="zoom:50%;" /></p><h3><a name="dns-security" class="md-header-anchor"></a><span>DNS Security</span></h3><ul><li><p><span>No security in original design</span></p><ul><li><p><span>DNS spoofing</span></p><ul><li><a href='https://www.cloudflare.com/learning/dns/what-is-dns/'><span>DNS</span></a><span> cache poisoning is the act of entering false information into a DNS cache, so that DNS queries return an incorrect response and users are directed to the wrong websites. </span></li></ul></li><li><p><span>DNS flooding</span></p><ul><li><span>A DNS flood is a type of </span><a href='https://www.cloudflare.com/learning/ddos/what-is-a-ddos-attack/'><span>distributed denial-of-service attack (DDoS)</span></a><span> where an attacker floods a particular domain’s DNS servers in an attempt to disrupt DNS resolution for that </span><a href='https://www.cloudflare.com/learning/dns/glossary/what-is-a-domain-name/'><span>domain</span></a><span>. </span></li></ul></li></ul></li><li><p><span>Solutions</span></p><ul><li><p><span>DNSSEC</span></p><ul><li><span>DNSSEC strengthens authentication in DNS using </span><em><span>digital signatures</span></em><span> based on </span><em><span>public key cryptography</span></em><span>. </span></li><li><span>With DNSSEC, it&#39;s not DNS queries and responses themselves that are cryptographically signed, but rather DNS data itself is signed by the owner of the data.</span></li></ul></li><li><p><span>Root signing</span></p></li></ul></li></ul><blockquote><p><span>Tutorial 3 Question 4 </span></p><p><strong><span>Consider a situation in which a cyberterrorist makes all the DNS servers in the world crash simultaneously. How does this change people&#39;s ability to use the Internet?</span></strong></p><ul><li><span>The DNS servers provide a </span><em><span>mapping between domain names and IP addresses</span></em><span>, such that</span>
<span>when a request for a Web page is received, the browser can look up in the DNS server the</span>
<span> IP address corresponding to the domain name of the requested page, and then download the requested page from that IP address.</span></li><li><span>If all the DNS servers in the world were to crash at the same time, nobody would be able to</span>
<span>map between domain names and IP addresses. </span></li><li><span>Therefore, the only way to access Web pages would be by using the IP address of the host server instead of the domain name. </span></li><li><span>Since most of us do not know the IP addresses of the servers we access, this type of situation would make use of the Internet virtually impossible for most users.</span></li></ul></blockquote><blockquote><p><span>Tutorial 3 Question 6</span></p><p><strong><span>DNS uses UDP instead of TCP. If a DNS packet is lost, there is no automatic recovery. Does</span></strong>
<strong><span>this cause a problem, and if so, how is it solved?</span></strong></p><ul><li><span>DNS is idempotent.</span></li><li><span>Operations can be repeated without harm.</span></li><li><span>When a process makes a DNS request, it starts a timer. If the timer expires, it just makes the request again. No harm is done.</span></li></ul></blockquote><h2><a name="email" class="md-header-anchor"></a><span>Email</span></h2><h3><a name="user-agents" class="md-header-anchor"></a><span>User agents</span></h3><ul><li><p><span>allow user to read and send email</span></p></li><li><p><span>Basic functions: compose, report, display, dispose</span></p></li><li><p><span>Envelope and contents: encapsulation of transport related information</span></p></li><li><p><span>Header and body: </span></p><ul><li><strong><span>header</span></strong><span> user agent control info</span></li><li><strong><span>body</span></strong><span> for human recipient</span></li></ul></li><li><p><span>User must provide message, destination, optional other parameters</span></p></li><li><p><span>Addressing scheme user@dns-address</span></p></li></ul><p><strong><span>Message transfer agents</span></strong><span>: transport messages from source to destination</span></p><h3><a name="format" class="md-header-anchor"></a><span>Format</span></h3><p><img src="Networking.assets/image-20200624000208734.png" alt="image-20200624000208734" style="zoom:50%;" /></p><h3><a name="message-header-fields" class="md-header-anchor"></a><span>Message Header Fields</span></h3><p><img src="Networking.assets/image-20200624000224471.png" alt="image-20200624000224471" style="zoom:50%;" /></p><h3><a name="smtp" class="md-header-anchor"></a><span>SMTP</span></h3><p><img src="Networking.assets/image-20200624000409444.png" alt="image-20200624000409444" style="zoom:33%;" /></p><ul><li><p><span>SMTP uses </span><strong><span>TCP</span></strong><span> to reliably transfer email message from client to server, port 25</span></p></li><li><p><span>three phases of transfer </span></p><ul><li><span>handshaking (greeting),</span></li><li><span>transfer of messages</span></li><li><span>closure</span></li></ul></li><li><p><span>command/response interaction: commands in ASCII text</span>
<span>and response consists of status code and phrase</span></p></li><li><p><span>messages </span><strong><span>must</span></strong><span> be in 7-bit ASCII</span></p></li></ul><h3><a name="mime" class="md-header-anchor"></a><span>MIME</span></h3><p><img src="Networking.assets/image-20200624000505461.png" alt="image-20200624000505461" style="zoom:50%;" /></p><p><span>MIME has 5 additional message headers</span></p><ul><li><strong><span>MIME-Version</span></strong><span>: identifies the MIME version</span></li><li><strong><span>Content-Description</span></strong><span>: human readable describing contents</span></li><li><strong><span>Content-Id</span></strong><span>: unique identifier</span></li><li><strong><span>Content-Transfer-Encoding</span></strong><span>: how body is wrapped for transmission</span></li><li><strong><span>Content-Type</span></strong><span>: type and format of content</span></li></ul><h3><a name="transfer" class="md-header-anchor"></a><span>Transfer</span></h3><ul><li><span>SMTP: delivery/storage to receiver’s server</span></li><li><span>SMTP is a &#39;</span><strong><span>push</span></strong><span>&#39; protocol so you cannot pull emails off the server using SMTP</span></li></ul><h3><a name="delivery" class="md-header-anchor"></a><span>Delivery</span></h3><ul><li><p><strong><span>Local</span></strong></p></li><li><p><strong><span>POP3</span></strong><span> : Post Office Protocol; authorization (agent – server) and download</span></p></li><li><p><strong><span>IMAP</span></strong></p><ul><li><span>Internet Mail Access Protocol</span></li><li><span>more features (more complex);</span></li><li><span>provides for the manipulation of stored messages on server</span></li></ul></li><li><p><strong><span>HTTP</span></strong><span>: gmail, Hotmail, Yahoo! Mail, etc.</span></p></li></ul><p><img src="Networking.assets/image-20200624000844032.png" alt="image-20200624000844032" style="zoom:50%;" /></p><p><span>(a) Sending and reading mail when the receiver has a permanent Internet connection and the user agent runs on the same machine as the message transfer agent (now rare).</span></p><p><span>(b) Current case: notebook/PC/phone is not an MTA.</span></p><h3><a name="pop3----post-office-protocol" class="md-header-anchor"></a><span>POP3 – Post Office Protocol</span></h3><ul><li><p><span>Three states of a POP3 transaction</span></p><ul><li><span>Authorisation</span></li><li><span>Transactions</span></li><li><span>Update</span></li></ul></li><li><p><span>Syntax</span></p><ul><li><span>USER / PASS</span></li><li><span>LIST</span></li><li><span>RETR / DELE</span></li><li><span>QUIT (update)</span></li></ul></li><li><p><strong><span>Issue: “download and delete” mode does not allow messages to be re-read.</span></strong></p></li></ul><h3><a name="imap----internet-message-access-protocol" class="md-header-anchor"></a><span>IMAP – Internet Message Access Protocol</span></h3><ul><li><p><span>IMAP keeps user state across sessions</span></p><ul><li><span>Retain mailbox contents online (server) and allow manipulation of</span>
<span>online and offline messages and mailbox folders</span></li><li><span>Implications of server infrastructure to support high volume of IMAP</span>
<span>users. This implies storage projections by the provider, and hence</span>
<span>limitations.</span></li></ul></li></ul><blockquote><p><span>Tutorial Week 3 Question 2</span></p><p><strong><span>Describe the commonalities and differences between STMP and (persistent) HTTP.</span></strong></p><p><strong><span>Commonalities</span></strong><span>:</span></p><ul><li><span>Both of them are protocols used for transferring les between two sides.</span></li><li><span>Both of then are application layer protocol</span></li><li><span>Both of them use persistent TCP connections.</span></li></ul><p><strong><span>Differences</span></strong><span>:</span></p><ul><li><span>SMTP is a push protocol, while HTTP is a pull protocol.</span></li><li><span>SMTP requires all the contents in message to be in 7-bit ASCII format, while HTTP</span>
<span>has no such a restriction.</span></li><li><span>HTTP sends objects in a \one-in-one&quot; manner, namely, each object is sent via a mes-</span>
<span>sage. However, STMP sends objects in a \all-in-one&quot; manner, i.e., sending all the</span>
<span> objects in one message.</span></li></ul></blockquote><blockquote><p><span>Tutorial Week 3 Question 3</span></p><p><strong><span>Suppose that John just set up an auto-forwarding mechanism on his work email address,</span></strong>
<strong><span>which receives all of his business-related emails, to forward them to his personal email</span></strong>
<strong><span>address, which he shares with his wife. John&#39;s wife was unaware of this, and activated a</span></strong>
<strong><span>vacation agent on their personal account. Because John forwarded his email, he did not set up a vacation daemon on his work machine. What happens when an email is received at Johns work email address?</span></strong></p><ul><li><span>Each message received in Johns work email inbox will be forwarded to his personal inbox,</span>
<span>thereby generating an autoreply by the vacation agent, sent to his work inbox. </span></li><li><span>This reply will be seen by the work computer as a new message, and thus be forwarded to the personal mailbox. </span></li><li><span>Most vacation agents would note that this has the same From: address as the</span>
<span>previous, and end the process there. However, the agent may be configured to reply to each</span>
<span> new email. </span></li><li><span>In this case it will send another reply to the work inbox. As a result there will be</span>
<span>an endless string of messages for each message received in Johns work email address (unless the vacation agent is smart enough to reply just once to each sender it sees).</span></li></ul></blockquote><h1><a name="presentation-layer" class="md-header-anchor"></a><span>Presentation Layer</span></h1><ul><li><p><span>OSI layer 6 to provide</span></p><ul><li><span>Encryption</span></li><li><span>Compression</span></li><li><span>Data conversion (e.g., mapping CR/LF to LF, .doc to .docx)</span></li><li><span>Mapping between character sets (ASCII/EBCDIC, now UTF-8/BIG5/…)</span></li></ul></li><li><p><span>These services haven’t vanished: done by applications in TCP/IP model</span></p><ul><li><p><span>Why does IETF consider them “Application Layer”?</span></p><ul><li><span>The protocol to negotiate encryption etc. is quite simple and separate from</span>
<span>the algorithms</span></li><li><span>There aren’t simple “common services” needed by all applications</span></li><li><span>The application is not in the kernel, and so much more flexible</span></li><li><span>“Layering violations”</span></li></ul></li><li><p><span>Closest thing to presentation layer: Real time protocol (RTP)</span></p></li></ul></li></ul><h1><a name="session-layer" class="md-header-anchor"></a><span>Session Layer</span></h1><p><span>OSI Layer 5 to provide</span></p><ul><li><p><span>Authentication</span></p></li><li><p><span>Authorization</span></p></li><li><p><span>Session restoration</span></p><ul><li><span>continue a failed download</span></li><li><span>log back in to same point in an online purchase</span></li></ul></li><li><p><span>Examples:</span></p><ul><li><span>Remote procedure call (RPC)</span></li><li><span>Point-to-point tunneling protocol (PPTP)</span></li><li><span>Password (/Extensible) Authentication Protocol (PAP/EAP)</span></li></ul></li><li><p><span>Often used between protocols called </span><strong><span>layer 2</span></strong><span> and </span><strong><span>layer 3</span></strong></p><ul><li><span>Layers are funny. </span></li><li><span>Ethernet is always called “layer 2”, but has many properties of layer 3, and even some of layer 4.</span></li></ul></li></ul><h1><a name="transport-layer" class="md-header-anchor"></a><span>Transport layer</span></h1><h2><a name="role" class="md-header-anchor"></a><span>Role</span></h2><ul><li><p><span>provide services needed by applications, using services available by the network layer.</span></p></li><li><p><span>Application needs:</span></p><ul><li><strong><span>Stream</span></strong><span>: Data is a stream of bytes</span></li><li><strong><span>Multiplexing</span></strong><span>: Data from one application is not mixed with those for another</span></li><li><strong><span>Reliability</span></strong><span>: Data arrives reliably (or we know when a packet has been lost)</span></li><li><strong><span>In-order delivery</span></strong><span>: Data arrives in order</span></li><li><strong><span>Rate Control</span></strong><span>: Data doesn’t arrive faster than we can handle</span></li></ul></li><li><p><span>Network provides</span></p><ul><li><span>Get packets from host to host most of the time sometimes multiple copies</span></li></ul></li></ul><h2><a name="services" class="md-header-anchor"></a><span>Services</span></h2><ul><li><span>The Transport layer services provide interfaces between the </span><strong><span>Application layer</span></strong><span> and the </span><strong><span>Network/Internet layer.</span></strong></li><li><strong><span>Location</span></strong><span>: The Transport layer entities (the hardware or software which actually does the work e.g. OS kernel, processes, NIC) can exist in multiple locations.</span></li></ul><p><img src="Networking.assets/image-20200624013057568.png" alt="image-20200624013057568" style="zoom:50%;" /></p><ul><li><p><strong><span>Transport layer provides a “logical” communication channel between processes running on different hosts</span></strong></p><ul><li><p><span>Connection-oriented</span></p><ul><li><p><span>Connection establishment, data transfer, connection release (TCP)</span></p><ul><li><strong><span>Does Provide</span></strong><span> a reliable service on top of an unreliable network  to the application layer</span></li><li><strong><span>Doesn’t</span></strong><span> provide privacy, isochrony (preserving delay between packets)</span></li><li><span>Hides acknowledgements, congestion control, lost packets</span></li></ul></li></ul></li><li><p><span>Connectionless: data transfer (UDP)</span></p><ul><li><span>Provides multiplexing between different processes</span></li></ul></li></ul></li></ul><h2><a name="encapsulation" class="md-header-anchor"></a><span>Encapsulation</span></h2><p><img src="Networking.assets/image-20200624013215039.png" alt="image-20200624013215039" style="zoom:50%;" /></p><ul><li><p><span>Abstract representation of messages sent to and from transport entities</span></p></li><li><p><span>Encapsulation of segments (transport layer units) in packets (network/internet layer units) in frames (data/link layer units)</span></p><figure><table><thead><tr><th><span>Packet</span></th><th><span>Meaning</span></th></tr></thead><tbody><tr><td><span>Message</span></td><td><span>sent at the application layer</span></td></tr><tr><td><span>Segments</span></td><td><span>sent at the transport layer</span></td></tr><tr><td><span>Packets</span></td><td><span>sent at the internet/network layer</span></td></tr><tr><td><span>Frames</span></td><td><span>sent at the link/data link layer</span></td></tr></tbody></table></figure></li></ul><h2><a name="addressing" class="md-header-anchor"></a><span>Addressing</span></h2><ul><li><p><span>Addressing in the Transport layer is typically done using </span><strong><span>port numbers</span></strong></p></li><li><p><span>Full address is a 5-tuple</span></p><ul><li><span>source IP address</span></li><li><span>source port</span></li><li><span>destination IP address</span></li><li><span>destination port</span></li><li><span>protocol)</span></li></ul></li></ul><h3><a name="port-allocations" class="md-header-anchor"></a><span>Port allocations</span></h3><ul><li><p><strong><span>Range</span></strong><span>: 0-65535 (16 bits)</span></p></li><li><p><strong><span>Allocated by</span></strong><span>: Internet Assigned Numbers Authority (IANA)</span></p></li><li><p><strong><span>classified into 3 segments:</span></strong></p><ul><li><p><span>Well Known Ports (0-1023)</span></p><ul><li><span>21 FTP</span></li><li><span>22 SSH</span></li><li><span>23 Telnet</span></li><li><span>25 SMTP</span></li><li><span>80 HTTP</span></li><li><span>110 POP3</span></li><li><span>119 NNTP</span></li></ul></li><li><p><span>Registered Ports (1024-49151)</span></p><ul><li><span>Also called “user ports” but sill registered with IANA or similar body</span></li></ul></li><li><p><span>Dynamic Ports (49152-65535)</span></p></li></ul></li></ul><h2><a name="multiplexing-demultiplexing" class="md-header-anchor"></a><span>Multiplexing /Demultiplexing</span></h2><ul><li><strong><span>Multiplexing(MUXING)</span></strong><span>: combining multiple distinct streams into a single shared stream</span></li><li><strong><span>Demultiplexing</span></strong><span>(</span><strong><span>DEMUXING</span></strong><span>): splitting distinct streams out from a single shared stream</span></li></ul><p><span>![image-20200624014246763](Note.assets/image-20200624014246763.png</span><img src="Networking.assets/image-20200624014313909.png" alt="image-20200624014313909" style="zoom:50%;" /></p><h2><a name="udp----user-datagram-protocol" class="md-header-anchor"></a><span>UDP – User Datagram Protocol</span></h2><h3><a name="connectionless" class="md-header-anchor"></a><span>Connectionless</span></h3><p><span>The User Datagram Protocol provides a protocol whereby applications can transmit encapsulated IP datagrams </span><strong><span>without</span></strong><span> establishing a connection.</span></p><h3><a name="strengths" class="md-header-anchor"></a><span>Strengths</span></h3><ul><li><span>Simple and efficient</span></li><li><span>provide multiplexing/de-multiplexing</span></li><li><span>no delay waiting to recover lost packets</span></li><li><strong><span>Advantage over raw IP</span></strong><span>: the ability to specify ports for source and destination pairs.</span></li></ul><h3><a name="weaknesses" class="md-header-anchor"></a><span>Weaknesses</span></h3><ul><li><span>No flow control</span></li><li><span>No error control</span></li><li><span>No retransmission of bad segments</span></li></ul><h3><a name="applications" class="md-header-anchor"></a><span>Applications</span></h3><ul><li><p><span>Suitable for applications require a precise level of control over packet flow/error/timing</span></p></li><li><p><span>Suitable for </span><strong><span>timeout and resend</span></strong><span> client – server settings</span></p><ul><li><span>Clients sends a short request to the server, expects a short response</span></li><li><span>If that does not occur (request or response is lost) client timeouts</span>
<span>and resends</span></li><li><span>Simple to code, and fewer messages, one in each direction</span></li><li><span>DNS is a good example</span></li></ul></li><li><p><span>Suitable for real-time services (e.g., VoIP)</span></p><ul><li><span>If a packet is lost, we don’t want to wait for it to be resent</span></li><li><strong><span>Loss concealment</span></strong><span>(隐藏): fill in the time with our “best guess” sound</span></li></ul></li></ul><h3><a name="udp-header" class="md-header-anchor"></a><span>UDP header</span></h3><ul><li><p><span>UDP transmits in segments consisting of a header followed by the payload</span></p></li><li><p><span>UDP headers contain </span><strong><span>source</span></strong><span> and </span><strong><span>destination</span></strong><span> ports, payload is handed to the process which is attached to the particular port at the destination (using BIND primitive or similar)</span></p><ul><li><strong><span>destination port</span></strong><span> allows initial routing for incoming segments</span></li><li><strong><span>source port</span></strong><span> allows reply routing for outgoing segments.</span></li></ul></li></ul><p><img src="Networking.assets/image-20200624014723711.png" alt="image-20200624014723711" style="zoom:50%;" /></p><p><img src="Note.assets/image-20200624014730469.png" alt="image-20200624014730469" style="zoom: 50%;" /></p><h3><a name="udp-question" class="md-header-anchor"></a><span>UDP Question</span></h3><blockquote><p><span>Tutorial Week 4 Question 1</span></p><p><strong><span>Suppose a process in Host C has a UDP socket with port number 6789. Suppose both Host</span></strong>
<strong><span>A and Host B each send a UDP segment to Host C with destination port number 6789. </span></strong></p><ul><li><span>Will both of these segments be directed to the same socket at Host C? </span></li><li><span>Yes, both segments will be directed to the same socket.</span></li><li><span>This is because UDP receivers only use listening sockets, which are identified by a </span><strong><span>3-tuple (protocol, local IP address, local port)</span></strong><span>,</span>
<span>instead of the 5-tuple used for a connection-oriented socket.</span></li><li><span>If so, how will the process at Host C know that these two segments originated from two different hosts?</span></li><li><span>For each received segment, at the socket interface, the operating system will provide the process with the sender&#39;s IP address and port number to determine the origins of the individual segments.</span></li><li><span>If the sender also has a UDP listening socket on its sending port, then the original receiver can send it a reply by sending a UDP packet with the original sender&#39;s IP address and port.</span></li></ul></blockquote><blockquote><p><span>Tutorial Week 4 Question 2</span></p><p><strong><span>Is it possible for an application to enjoy reliable data transfer even when the application runs over UDP? If so, how?</span></strong></p><ul><li><span>Yes. </span></li><li><span>The application can implement its own retransmission scheme (transport layer functionality) on top of UDP. In this context, the application would be treating UDP as a network-layer protocol.</span></li><li><span>Example: VLAN There are even \virtual wires&quot;, in which IP packets carry bit streams, which represent actual</span>
<span>ethernet frames.</span></li></ul></blockquote><blockquote><p><span>Tutorial Week 4 Question 4</span></p><p><strong><span>Why does UDP exist? Would it not have been enough to just let the user processes send raw IP packets?</span></strong></p><ul><li><p><span>UDP provides multiplexing service to upper layer. </span></p></li><li><p><span>IP packets contain IP addresses, which specify a destination machine. </span></p><ul><li><span>Once such a packet arrived, how would the network handler know which process to give it to? </span></li></ul></li><li><p><span>UDP packets contain a destination port number. This information is essential so they can be delivered to the correct process.</span></p></li><li><p><span>UDP is sometimes called a &quot;process-to-process&quot;, as distinct from a &quot;host-to-host&quot; protocol</span>
<span>like IP. </span></p></li></ul></blockquote><h2><a name="rpc---remote-procedure-calls" class="md-header-anchor"></a><span>RPC - Remote Procedure Calls </span></h2><p><strong><span>Remote Procedure Calls</span></strong></p><ul><li><p><span>Allow calling procedures on a remote server as if they are local to the client</span></p></li><li><p><span>Hides the networking aspects from the programmer (proxy pattern haha)</span></p><ul><li><p><span>To hide the networking, the client and server must be bound to respective stubs</span></p><ul><li><span>Client stub – operates in the client address space</span></li><li><span>Server stub – operates in the server address space</span></li></ul></li><li><p><span>From the perspective of the client and server processes all</span>
<span>the calls are local</span></p></li></ul></li><li><p><span>Parameters can be passed and returned</span></p><ul><li><strong><span>Marshalling</span></strong><span> – convert the in-memory data structure to a form that can be stored or transmitted</span></li><li><strong><span>Unmarshalling</span></strong><span> – covert the stored or transmitted data into an in-memory data structure</span></li></ul></li><li><p><span>RPC isn’t a single protocol/API. Dozens of variants exist gRPC, Dubbo</span></p></li></ul><h3><a name="how-rpc-works" class="md-header-anchor"></a><span>How RPC works?</span></h3><ol start='' ><li><span>Client process on Machine A calls procedure on Machine B</span></li><li><span>Process on machine A is suspended, whilst execution of the procedure takes place on Machine B</span></li><li><span>Machine B responds with result to Machine A, which then continues processing</span></li></ol><p><img src="Networking.assets/image-20200624020007685.png" alt="challenges" style="zoom:50%;" /></p><h3><a name="challenges" class="md-header-anchor"></a><span>Challenges</span></h3><ul><li><p><span>Cannot pass pointers easily</span></p><ul><li><span>client and server are in different address spaces</span></li><li><span>Possible to marshal and unmarshal underlying value and create a pointer in each address space, does not work for complex data structures</span></li></ul></li><li><p><span>Weakly typed languages like C can present problems, e.g. unknown array sizes</span></p></li><li><p><span>Unable to deduce parameter types</span></p></li><li><p><span>Global variables are not shared</span></p></li></ul><h3><a name="udp-vs-tcp-for-rpc" class="md-header-anchor"></a><span>UDP vs TCP for RPC</span></h3><ul><li><p><strong><span>RPC over TCP</span></strong></p><ul><li><span>TCP can be used for non-idempotent operations</span></li></ul></li><li><p><strong><span>RPC over UDP: </span></strong><span> </span></p><ul><li><p><span>Resending after timeout if no reply is received</span></p><ul><li><span>a reply constitutes an acknowledgement of the request</span></li></ul></li><li><p><span>Handling large parameter sizes that need to be split across multiple UDP segments</span></p></li><li><p><span>Caution must be used if operation is not idempotent(e.g., incrementing a bank balance)</span></p></li></ul></li></ul><h2><a name="rtp----real-time-transport-protocol-rtp" class="md-header-anchor"></a><span>RTP – Real-Time Transport Protocol (RTP)</span></h2><ul><li><span>RTP multiplexes several streams into a single stream of UDP segments</span></li></ul><p><img src="Networking.assets/image-20200624020820491.png" alt="image-20200624020820491" style="zoom:50%;" /></p><h3><a name="which-layer-is-rtp-at" class="md-header-anchor"></a><span>Which layer is RTP at?</span></h3><ul><li><span>RTP typically runs on top of UDP.</span></li><li><span>At the receiver side, the application receives the RTP packet from its socket</span>
<span>interface.</span></li><li><span>The application extracts the audio chunk from the RTP packet and uses the</span>
<span>header fields of the RTP packet to properly decode and play back the audio chunk.</span></li></ul><p><img src="Networking.assets/image-20200624020902473.png" alt="image-20200624020902473" style="zoom:50%;" /></p><p><span>(a) The position of real-time protocol in the protocol stack</span></p><p><span>(b) Packet nesting</span></p><p>&nbsp;</p><h3><a name="rtp-header" class="md-header-anchor"></a><span>RTP Header</span></h3><ul><li><span>Payload type – encoding used (MP3, etc.) – can vary each time</span></li><li><span>Sequence Number – counter incremented on each packet</span></li><li><span>Timestamp – Source controlled relative to start of the stream</span></li></ul><p><img src="Networking.assets/image-20200624021749594.png" alt="image-20200624021749594" style="zoom:50%;" /></p><p>&nbsp;</p><h3><a name="rtp-playback" class="md-header-anchor"></a><span>RTP Playback</span></h3><p><img src="Networking.assets/image-20200624022117233.png" alt="image-20200624022117233" style="zoom:50%;" /></p><p>&nbsp;</p><ul><li><p><span>Jitter – variation in delay of packets</span></p><ul><li><span>Buffer at receiver to counter it</span></li></ul></li><li><p><span>Packet 8 too late, can wait or skip, depending on application</span></p></li><li><p><span>Size of buffer is also application specific (VOIP = small buffer)</span></p></li></ul><h2><a name="rtcp---real-time-transport-control-protocol" class="md-header-anchor"></a><span>RTCP - Real-time Transport Control Protocol</span></h2><ul><li><p><span>Control protocol for RTP</span></p><ul><li><span>Handles feedback, synchronization, and UI</span></li></ul></li><li><p><span>Feedback to source</span></p><ul><li><span>Delay, jitter, bandwidth, congestion</span></li><li><span>Used by encoder to adaptively encode to suit network conditions</span></li><li><span>In multicast settings, feedback is limited to small percentage of media</span>
<span>bandwidth</span></li></ul></li><li><p><span>Synchronization</span></p><ul><li><span>Where different streams use different clocks/have different drift</span></li></ul></li><li><p><span>UI</span></p><ul><li><span>naming sources to show who is on a conference call</span></li></ul></li></ul><h2><a name="tcp---transmission-control-protocol" class="md-header-anchor"></a><span>TCP - Transmission Control Protocol</span></h2><h3><a name="tcp-services" class="md-header-anchor"></a><span>TCP Services</span></h3><ul><li><p><span>The Transmission Control Protocol provides a protocol by which applications can transmit IP datagrams within a</span>
<span>connection-oriented framework, thus increasing reliability.</span></p><ul><li><p><span>TCP transport entity manages TCP streams and interfaces to the IP layer</span></p><ul><li><span>TCP entity accepts user data streams, and segments them into pieces</span></li><li><span>sends each piece as a separate IP datagram</span></li></ul></li><li><p><span>Recipient TCP entities reconstruct the original byte streams from the encapsulation</span></p></li></ul></li><li><p><img src="Networking.assets/image-20200624110332545.png" alt="image-20200624110332545" style="zoom:50%;" /></p></li></ul><h4><a name="service-model" class="md-header-anchor"></a><span>Service Model</span></h4><ul><li><p><span>The sender and receiver both create sockets</span></p><ul><li><span>A kernel data structure, named by the 5-tuple of IP address an port number of sender and receiver, and the protocol</span></li><li><span>For TCP service to be activated, connections must be explicitly established between a socket at a sending host (src-host, src-port) and a socket at a receiving host (dest-host, dest-port)</span></li></ul></li><li><p><img src="Networking.assets/image-20200624110326739.png" alt="image-20200624110326739" style="zoom:50%;" /></p></li></ul><h4><a name="tldr" class="md-header-anchor"></a><span>TL;DR</span></h4><p><span>TCP provides</span></p><ul><li><p><strong><span>Steam</span></strong><span> </span><strong><span>oriented</span></strong><span> :</span></p><ul><li><span>Data is sent and received as a stream of bytes</span></li><li><span>message boundaries are not preserved</span></li></ul></li><li><p><strong><span>Multiplexing</span></strong></p><ul><li><span>TCP does multiplexing and de-multiplexing at the sender and receiver ends respectively as a number of logical connections can be established between port numbers over a physical connection.</span></li></ul></li><li><p><strong><span>Reliability</span></strong></p><ul><li><p><span>The delivery of the packet, i.e., no packet loss</span></p><ul><li><span>TCP attempts to recover lost or corrupted packets by using re-transmission, acknowledgement policy and timers.</span></li></ul></li><li><p><span>the integrity of the packet</span></p><ul><li><span>uses checksum for error detection</span></li><li><span>corrupted packets will be retransmitted</span></li></ul></li><li><p><span>It uses Acknowledge number,  sequence number to ensure reliability</span></p></li></ul></li><li><p><strong><span>Congestion control</span></strong></p></li><li><p><strong><span>Flow control</span></strong><span>: limits the rate a sender transfers data to guarantee reliable delivery. </span></p></li><li><p><strong><span>Ordered data transfer</span></strong></p><ul><li><span>Guaranteed </span><strong><span>in-order</span></strong><span> delivery of data to the receiver</span></li><li><span>segments will arrive in order by the help of sequence number</span></li></ul></li></ul><h3><a name="tcp-header-and-segment" class="md-header-anchor"></a><span>TCP Header and Segment </span></h3><ul><li><p><span>TCP pairs each chunk of client data with a TCP header, thereby forming TCP segments.</span></p></li><li><p><span>Data is exchanged between TCP entities in segments</span></p><ul><li><span>each has a 20– 60 byte header, plus zero or more data bytes</span></li></ul></li><li><p><strong><span>Segment size</span></strong><span>: TCP entities decide how large segments should be, given two constraints</span></p><ul><li><span>IP payload &lt; 65,515 byte</span></li><li><span>Maximum Transfer Unit (MTU) - generally 1500 bytes</span></li></ul></li></ul><p>&nbsp;</p><p><img src="Networking.assets/image-20200626110932352.png" alt="image-20200626110932352" style="zoom:50%;" /></p><p><img src="Networking.assets/image-20200624103101848.png" alt="image-20200624103101848" style="zoom:50%;" /></p><h3><a name="tcp-primitives" class="md-header-anchor"></a><span>TCP Primitives</span></h3><p><span>core functions which allow interface with transport services (in particular TCP)</span></p><figure><table><thead><tr><th><span>Primitive</span></th><th><span>Packet</span></th><th><span>Meaning</span></th></tr></thead><tbody><tr><td><span>LISTEN</span></td><td><span>None</span></td><td><span>Block until something tries to connect</span></td></tr><tr><td><span>CONNECT</span></td><td><span>CONNECTION REQ</span></td><td><span>Actively attempt to establish a connection</span></td></tr><tr><td><span>SEND</span></td><td><span>DATA</span></td><td><span>Send information</span></td></tr><tr><td><span>RECEIVE</span></td><td><span>None</span></td><td><span>Block until DATA packet arrives</span></td></tr><tr><td><span>DISCONNECT</span></td><td><span>DISCONNECTION REQ</span></td><td><span>This sides wants to release the connection</span></td></tr></tbody></table></figure><h3><a name="tcp-connection" class="md-header-anchor"></a><span>TCP Connection</span></h3><h4><a name="features" class="md-header-anchor"></a><span>Features</span></h4><ul><li><p><strong><span>Full duplex</span></strong><span>: data in both directions simultaneously</span></p></li><li><p><strong><span>End to end</span></strong><span>: exact pairs of senders and receivers</span></p></li><li><p><strong><span>Byte streams, not message streams</span></strong><span>: message boundaries are not preserved</span></p></li><li><p><strong><span>Buffer capable</span></strong><span>: </span></p><ul><li><span>TCP entity can choose to buffer prior to sending or not depending on the context</span></li><li><code>PUSH</code><span>: indicates a transmission is not to be delayed, and should interrupt the receiving application</span></li><li><code>URGENT</code><span>: indicates that transmission should be sent immediately, and that the receiver should send it to</span>
<span>the application out-of-band</span></li></ul></li></ul><h4><a name="issues" class="md-header-anchor"></a><span>Issues</span></h4><ul><li><p><span>TCP is a connection orientated protocol running over a </span><strong><span>connectionless</span></strong><span> network layer(IP)</span></p></li><li><p><span>When networks can lose, store and duplicate packets, connection establishment can be complicated</span></p><ul><li><strong><span>delay</span></strong><span>: congested networks may delay acknowledgements</span></li><li><strong><span>duplicate</span></strong><span>: incurring repeated multiple transmissions</span></li><li><span>any of which may not arrive at all or out of sequence – delayed duplicates</span></li></ul></li></ul><h4><a name="connection-establishment" class="md-header-anchor"></a><span>Connection establishment</span></h4><h5><a name="three-way-handshake" class="md-header-anchor"></a><span>Three-way handshake</span></h5><ul><li><p><strong><span>Goals</span></strong><span> </span></p><ul><li><span>Ensure one (and </span><strong><span>only one</span></strong><span>) connection is established, even if some set-up packets get lost</span></li><li><span>Establish initial sequence numbers for sliding window</span></li></ul></li><li><p><span>Three-way handshake</span></p><ul><li><span>avoids problems that can occur when both sides allocate </span><strong><span>same sequence numbers</span></strong><span> by accident</span></li><li><span>Sender and receivers exchange information about which sequencing strategy each will use, and agree on it before transmitting segments</span></li></ul></li></ul><p><img src="Networking.assets/image-20200624095142329.png" alt="image-20200624095142329" style="zoom:50%;" /></p><ul><li><p><span>(a) Normal operation</span></p><ul><li><span>The first two segments carry no payload, that is, no application-layer data; </span></li><li><span>the third of these segments may carry a payload.</span></li></ul></li><li><p><span>(b) Simultaneous connection attempts</span></p><ul><li><p><span>Two simultaneous connection attempts results in only one connection</span></p></li><li><p><span>Basically, a TCP receiving duplicate SYNs will SYN,ACK them, but it will receive a RST for the duplicate. </span></p></li></ul></li><li><p><span>At end, Host 1 and Host 2 have agreed on respective sequence numbers</span></p></li></ul><h5><a name="synchronisation" class="md-header-anchor"></a><span>Synchronisation</span></h5><ul><li><p><code>SYN</code><span> is used for synchronization during connection establishment</span></p><ul><li><span>Sending </span><code>SYN</code><span> or </span><code>FIN</code><span> causes sequence number to be incremented by 1</span></li></ul></li><li><p><code>SYN</code><span> is used in both </span><code>CONNECTION_REQUEST</code><span> and </span><code>CONNECTION_ACCEPTED</code><span>, </span><code>ACK</code><span> bit distinguishes between the two</span></p><ul><li><span>Connection request has </span><code>SYN=1</code><span>, </span><code>ACK=0</code></li><li><span>Connection reply has </span><code>SYN=1</code><span>, </span><code>ACK=1</code></li></ul></li><li><p><strong><span>Sequence Number</span></strong></p><ul><li><p><span>first byte of this segments payload</span></p><ul><li><span>1 + data sent prior to this segment</span></li></ul></li><li><p><span>Offset by a random number</span></p><ul><li><span>initial value is arbitrary</span></li><li><span>offset will be reflected in both Sequence and Acknowledgement numbers</span></li></ul></li></ul></li><li><p><strong><span>Acknowledgement Number</span></strong></p><ul><li><p><span>next byte the sender expects to receive</span></p><ul><li><span>data successfully received + 1</span></li></ul></li><li><p><span>Bytes received without gaps</span></p><ul><li><span>a missing segment will stop this incrementing, even if later segments have been received</span></li></ul></li></ul></li></ul><h4><a name="retransmission" class="md-header-anchor"></a><span>Retransmission</span></h4><ul><li><p><span>RTO(retransmission timer)</span></p><ul><li><span>Initialised with a default value and updated based on network</span>
<span>performance</span></li><li><span>If the timer expires before an ACK is received the segment is resent</span></li></ul></li><li><p><span>Fast retransmission(3 DupACKs)</span></p><ul><li><p><span>Receiver receives segment with a sequence number higher than expected (i.e. segment has been lost)</span></p><ul><li><span>Receiver sends ACK with sequence number it is expecting</span></li><li><span>This is a duplicate of the previously sent acknowledgement (DupACK)</span></li><li><span>After receiving 3 DupACKs the sender resends the lost segment</span></li></ul></li></ul></li></ul><h4><a name="closing" class="md-header-anchor"></a><span>Closing</span></h4><ul><li><p><span>The </span><code>FIN</code><span> flag is used to signify a request to close a connection</span></p></li><li><p><span>Each FIN is </span><strong><span>directional</span></strong><span>, once acknowledged no further data can be sent from the sender to the receiver</span></p><ul><li><span>Data can continue to flow in the other direction</span></li><li><span>Sender of FIN will </span><strong><span>STILL</span></strong><span> retransmit unacknowledged segments</span></li></ul></li><li><p><span>Typically requires 4 segments to close, 1 FIN and 1 ACK for each direction</span></p><ul><li><p><strong><span>Can be optimised to 3 segments</span></strong></p><ul><li><span>Host A send FIN request</span></li><li><span>Host B responds with ACK of Host A FIN request, and sends FIN request of its own</span></li><li><span>Host A send ACK of Host B’s FIN request and connection is closed</span></li></ul></li></ul></li><li><p><span>The </span><code>RST</code><span> flag is used to signify a hard close of a connection</span></p><ul><li><span>Basically states the sender is closing the connection and will not listen for any further messages</span></li><li><code>RST</code><span> is sent in response to receiving a packet for a closed socket.</span></li><li><span>Can be used to close a connection, but </span><code>FIN</code><span> is greatly preferred because </span><strong><span>it is an orderly shutdown of the connection</span></strong><span>, as opposed to a reset</span></li></ul></li></ul><p><img src="Networking.assets/Figure_13.gif" referrerpolicy="no-referrer" alt="Network programming in Linux - Transmission Control Protocol (TCP)"></p><h4><a name="syn-flooding" class="md-header-anchor"></a><span>SYN Flooding</span></h4><ul><li><p><strong><span>Why</span></strong><span>: To establish a connection, the server to remember an initial Sequence number for each received SYN request</span></p></li><li><p><strong><span>How</span></strong><span>: An attacker would make initial SYN requests then not send the appropriate ACK, causing the server to gradually fill up its queue with sequence numbers for now defunct connections</span></p></li><li><p><strong><span>Solution</span></strong></p><ul><li><p><span>Rather than store the sequence number it is derived from connection information and a timer that creates a stateless SYN queue using cryptographic hashing</span></p></li><li><p><span>Incurs performance cost in validating SYN Cookies, but preferable to being unresponsive</span></p><ul><li><span>typically only enabled when under attack</span></li></ul></li></ul></li></ul><h3><a name="tcp-sliding-window" class="md-header-anchor"></a><span>TCP Sliding Window</span></h3><ul><li><p><strong><span>Window</span></strong></p><ul><li><span>Sender and receiver maintain buffers to send and receive data independently of the application</span></li><li><span>No guarantee that data is immediately sent or read from the respective buffers. i.e. data can be buffered</span></li><li><span>Other windows are maintained for congestion control</span></li></ul></li></ul><h4><a name="send-window" class="md-header-anchor"></a><span>Send window</span></h4><ul><li><p><span>What data the sender is able to send</span></p><ul><li><span>unacknowledged segments and unsent data that will fit into the receive window</span></li></ul></li></ul><h4><a name="receive-window-sliding-window" class="md-header-anchor"></a><span>Receive window (Sliding Window)</span></h4><ul><li><p><strong><span>controlled by receiver</span></strong><span>: Sliding window is controlled by receiver</span></p></li><li><p><span>Determines </span><strong><span>amount of data the receiver is able to accept</span></strong></p><ul><li><span>window size in ACK</span></li></ul></li><li><p><strong><span>Zero Receive Window</span></strong><span>: When the window is 0 the sender should not send any data</span></p><ul><li><p><span>the sender can send URGENT data</span></p></li><li><p><span>the sender can send “</span><strong><span>zero window probe</span></strong><span>”</span></p><ul><li><span>0 byte segment that causes the receiver to re-announce the next expected byte and window size</span>
<span>(window probe) this is designed to prevent deadlock</span></li></ul></li></ul></li><li><p><span>Senders may delay sending data, e.g. instead of sending the 2KB immediately, could wait for a further 2KB to fill the 4KB</span>
<span>receive window</span></p></li><li><p><span>Sender Maintains the following invariant: </span><code>LastByteSent - LastByteAcked &lt;= ReceiveWindowAdvertised</code></p></li></ul><p><img src="Networking.assets/image-20200625012528149.png" alt="image-20200625012528149" style="zoom:50%;" /></p><p><img src="Networking.assets/image-20200625013331756.png" alt="image-20200625013331756" style="zoom:50%;" /></p><h4><a name="potential-for-deadlock" class="md-header-anchor"></a><span>Potential for deadlock</span></h4><ul><li><p><span>Sender won’t send any more data (window size is 0)</span></p><ul><li><span>Sender can initiate an update by sending a ZeroWindowProbe</span></li></ul></li><li><p><span>Receiver won’t receive anything, so won’t send any ACKs to increase window size</span></p><ul><li><span>Receiver can initiate an update by sending a WindowUpdate</span></li></ul></li></ul><blockquote><p><span>Tutoiral 6 Question 2</span></p><p><strong><span>How can a deadlock occur in the TCP Sliding Window protocol?</span></strong><span> </span></p><ul><li></li></ul><p><strong><span>What is the countermeasure used in TCP to prevent this scenario happening?</span></strong></p><p>&nbsp;</p></blockquote><h3><a name="congestion-control-window-cwnd" class="md-header-anchor"></a><span>Congestion Control Window CWND</span></h3><ul><li><p><span>dynamically adjusted window size based on network performance to aid efficient transfer</span></p></li><li><p><strong><span>CWND maintained</span></strong><span> by the </span><strong><span>sender</span></strong></p><ul><li><span>Also only used at the sender</span></li><li><span>the </span><strong><span>sliding window</span></strong><span> that is controlled by the </span><strong><span>receiver</span></strong></li><li><span>No changes to packet formats to send additional field</span></li></ul></li></ul><h4><a name="slow-start" class="md-header-anchor"></a><span>Slow-start</span></h4><ul><li><p><span>Although it has a far from slow start, it is </span><strong><span>exponential</span></strong><span> in growth</span></p></li><li><p><strong><span>Initial size</span></strong><span>: 2*maximum segment size</span></p></li><li><p><span>Slow start keeps increasing the size of </span><code>ssthresh</code><span> until </span></p><ul><li><p><span>a timeout occurs or </span></p><ul><li><span>ssthresh is set to half the current congestion window size, start slow-start</span></li></ul></li><li><p><span>the threshold is reached</span></p><ul><li><span>start Additive increase</span></li></ul></li></ul></li><li><p><strong><span>As each new segment is acknowledged, the congestion window is increased by one maximum segment size</span></strong></p><ul><li><span>CWND++</span></li></ul></li></ul><p><img src="Networking.assets/image-20200625030243438.png" alt="image-20200625030243438" style="zoom:50%;" /></p><ul><li><p><span>Each full window of acknowledgements doubles the congestion window which grows until</span></p><ul><li><span>a timeout</span></li><li><span>It reaches a threshold, SSthresh</span></li></ul></li></ul><h4><a name="congestion-avoidance-additive-increase" class="md-header-anchor"></a><span>Congestion Avoidance (Additive increase)</span></h4><ul><li><span>Known as TCP Tahoe (1988)</span></li><li><span>Once</span><code>ssthresh</code><span> `is reached the growth is slowed to linear, by adding 1 MSS to the congestion window for each successful ACK.</span></li><li><span>Can also react to known lost segments via fast retransmission</span></li></ul><p><img src="Networking.assets/image-20200625031330489.png" alt="image-20200625031330489" style="zoom:50%;" /></p><p>&nbsp;</p><h4><a name="fast-recovery" class="md-header-anchor"></a><span>Fast recovery</span></h4><ul><li><p><span>Fast recovery using duplicate acknowledge counts</span></p></li><li><p><span>Starts from new ssthresh instead of original starting value</span></p><ul><li><span>effectively avoiding the slow start phase and going straight to additive increase</span></li></ul></li></ul><p><img src="Networking.assets/image-20200625031457858.png" alt="image-20200625031457858" style="zoom:50%;" /></p><h4><a name="further-optimisations" class="md-header-anchor"></a><span>Further Optimisations</span></h4><ul><li><p><span>SACK (</span><strong><span>Selective Acknowledgements</span></strong><span>) </span></p><ul><li><span>provides greater ability to track segments in-flight, by allowing up to 3 ranges of bytes received to be specified</span></li></ul></li></ul><p><img src="Networking.assets/image-20200625031619492.png" alt="image-20200625031619492" style="zoom:50%;" /></p><ul><li><p><span>ECN Explicit Congestion Notification (ECE &amp; CWR bits set during SYN)</span></p><ul><li><p><span>Allows IP Layer to indicate congestion is occurring without dropping the segment by setting an ECN flag</span></p></li><li><p><span>Receiver indicates this to sender via ECE (ECN Echo) flag</span></p></li><li><p><span>Sender acknowledges this by </span></p><ul><li><span>setting the Congestion Window Reduced Flag (CWR), </span></li><li><span>reacts as if a segment has been lost, without actually having lost it</span></li></ul></li></ul></li></ul><h4><a name="macroscopic-model" class="md-header-anchor"></a><span>Macroscopic model</span></h4><ul><li><p><span>These packet-level rules affect many things we care about</span></p><ul><li><span>Fairness between flows</span></li><li><span>Response to long round-trip times (RTTs)</span></li><li><span>Response to random packet loss</span></li></ul></li></ul><p><img src="Networking.assets/image-20200625032105171.png" alt="image-20200625032105171" style="zoom:50%;" /></p><p><img src="Networking.assets/image-20200625032052124.png" alt="image-20200625032052124" style="zoom:50%;" /></p><p><strong><span>Why</span></strong><span>: TCP is forcing the packet loss rate to be high in order to keep the window size small enough.</span></p><p><strong><span>Model Limitation</span></strong></p><ul><li><span>Window only responds to one packet loss per RTT</span></li><li><span>Packet losses are clustered</span></li></ul><h3><a name="tcp-question" class="md-header-anchor"></a><span>TCP Question</span></h3><blockquote><p><span>Tutorial Week 4 Question 3</span></p><figure><table><thead><tr><th><span>Service</span></th><th><span>TCP</span></th><th><span>UDP</span></th></tr></thead><tbody><tr><td><span>Reliable data transfer between processes</span></td><td><span>Yes</span></td><td><span>No</span></td></tr><tr><td><span>Minimum data transmission rate between processes</span></td><td><span>No</span></td><td><span>No</span></td></tr><tr><td><span>Congestion-controlled data transfer between processes</span></td><td><span>Yes</span></td><td><span>No</span></td></tr><tr><td><span>A guarantee that data will be delivered within a specified amount of time</span></td><td><span>No</span></td><td><span>No</span></td></tr><tr><td><span>Preserve application-level message boundaries.</span></td><td><span>No</span></td><td><span>Yes</span></td></tr><tr><td><span>Guaranteed in-order delivery of data to the receiver</span></td><td><span>Yes</span></td><td><span>No</span></td></tr></tbody></table></figure></blockquote><blockquote><p><span>Tutorial Week 4 Question 5</span></p><p><strong><span>Both UDP and TCP use port numbers to identify the destination entity when delivering a message. Give two reasons for why these protocols invented a new abstract ID (port numbers), instead of using process IDs, which already existed when these protocols were</span></strong>
<strong><span>designed?</span></strong></p><ul><li><p><span>process IDs are OS-specific</span></p></li><li><p><span>not good for an OS-independent protocol</span></p></li><li><p><span>A single process may establish multiple channels of communications.</span></p></li><li><p><span>Single process ID (per process) as the destination identifier cannot be used to distinguish between these channels.</span></p></li><li><p><span>Example: FTP</span></p><ul><li><span>control connection</span></li><li><span>data connection</span></li></ul></li><li><p><span>Having processes listen on well known ports is easy, e.g. 80, but well-known process IDs are impossible.</span></p></li></ul></blockquote><blockquote><p><span>Tutorial Week 4 Question 7</span></p><p><strong><span>A process on host 1 has been assigned port </span><code>p</code><span>, and a process on host 2 has been assigned port </span><code>q</code><span>.</span></strong></p><ul><li><p><span>Is it possible for there to be two or more TCP connections between these two ports at the same time?</span></p><ul><li><span>No, A connection is identified only by its sockets.</span></li><li><span>One and only one connection can be established between a unique pair of ports on two hosts</span></li></ul></li><li><p><span>Is it possible for there to be more than one TCP connection on port p of host 1 at a time?</span></p><ul><li><span>Yes, 5 tuple is used to identify a socket. </span></li><li><span>Connections can be identified as long as they all have different remote IP addresses or different remote ports.</span></li></ul></li></ul></blockquote><blockquote><p><span>Tutorial Week 5 Question 1</span></p><p><strong><span>Consider a TCP connection between Host A and Host B. Suppose that the TCP segments traveling from Host A to Host B have source port number x and destination port number y. What are the source and destination port numbers for the segments traveling from Host B to Host A?</span></strong></p><p><span>Host A: Source x, Destination y</span></p><p><span>Host B: Source y, Destination x</span></p></blockquote><blockquote><p><span>Tutorial Week 5 Question 4</span></p><p><strong><span>Suppose Host A sends two TCP segments back to back to Host B over a TCP connection. The first segment has sequence number 900; the second has sequence number 1024.</span></strong></p><ul><li><span>How much data is in the 1st segment?</span></li><li><span>1024 - 900 = 124 bytes</span></li><li><span>Suppose the first segment is lost but the second segment arrives at B. In the acknowledgement that Host B sends to Host A, what will</span>
<span>be the acknowledgement number?</span></li><li><span>ACK = 900</span></li><li><span>Suppose that now the third segment with sequence number of 1124 from Host A arrives to Host B, and the second segment is still missing.</span>
<span>What will be the acknowledgement number?</span></li><li><span>It is still 900. </span></li><li><span>The acknowledgement number is always up to the byte-number in the byte-stream of the first missing byte.</span></li></ul></blockquote><blockquote><p><span>Tutorial Week 5 Question 5</span></p><p><strong><span>Host A and B are communicating over a TCP connection, and Host B has already received from A all bytes up through byte 126. Suppose</span></strong>
<strong><span>Host A then sends two segments to Host B back-to-back. The first and second segments contain 80 and 40 bytes of data, respectively. In them first segment, the sequence number is 127, the source port number is 302, and the destination port number is 80. Host B sends an acknowledgment whenever it receives a segment from Host A.</span></strong></p><ul><li><p><span>In the second segment sent from Host A to B, what are the sequence number, source port number, and destination port number?</span></p><ul><li><span>Source port: 302</span></li><li><span>Dest port: 80</span></li><li><span>Seq # = 127 + 80 = 207</span></li></ul></li><li><p><span>If the 1st segment arrives before the second segment, in the acknowledgment of the 1st arriving segment, what is the acknowledgment</span>
<span>number, the source port number, and the destination port number?</span></p><ul><li><span>Source port: 80</span></li><li><span>Dest port: 302</span></li><li><span>Ack # = 127 + 80 = 207</span></li></ul></li><li><p><span>If the second segment arrives before the 1st segment, in the acknowledgment of the 1st arriving segment, what is the acknowledgment</span>
<span>number?</span></p><ul><li><span>ACK # = 127 </span></li></ul></li><li><p><span>Suppose the two segments sent by A arrive in order at B. The first acknowledgment is lost and the second acknowledgment arrives after the first timeout interval. Draw a timing diagram, showing these segments and all other segments and acknowledgments sent. (Assume there is no additional packet loss.) For each segment in your figure, provide the sequence number and the number of bytes of data;</span>
<span>for each acknowledgment that you add, provide the acknowledgment number.</span></p></li></ul><p><img src="Networking.assets/image-20200625023952760.png" referrerpolicy="no-referrer" alt="image-20200625023952760"></p></blockquote><blockquote><p><span>Tutorial Week 5 Question 6</span></p><p><span>A reliable data transfer should provide two guarantees:</span></p><ul><li><span>the delivery of the packet, i.e., no packet loss;</span></li><li><span>protection against accidental errors, i.e., packets corrupted by random changes of bits will not be delivered.</span></li></ul><p><span>It does not guarantee in-order delivery; we say \TCP provides reliable, in-order delivery&quot; because reliable does not imply in-order. What other</span>
<span>notions of  reliability&quot; are there, and at what layers are they provided?</span></p><ul><li><span>The data hasn&#39;t been maliciously corrupted along the way. That is provided by </span><strong><span>digital signatures</span></strong><span>, usually at layer 7, but possibly at layer 6.</span></li><li><span>The data was sent by the person it claims to have been sent by. That is provided by </span><strong><span>authentication</span></strong><span>, at layers 7, 5 (e.g., TLS) or 2 (e.g., WiFi).</span></li><li><span>The data is private cannot be seen by others. That is provided by </span><strong><span>encryption</span></strong><span>, again at layer 7 or layer 6.</span></li></ul></blockquote><blockquote><p><span>Tutorial Week 6 Question 3</span></p><ul><li><p><strong><span>How does the TCP Slow Start algorithm detect potential congestion in the network?</span></strong><span> </span></p></li><li><p><span>TCP segment loss (as indicated by a </span><strong><span>timeout event</span></strong><span> or a </span><strong><span>fast retransmission</span></strong><span> event) is taken as an indication of network congestion and TCP decreases its congestion window size accordingly.</span></p></li><li><p><strong><span>What other methods (possibly with the explicit assistance of the network layer) could be used to infer congestion in the network?</span></strong></p></li><li><p><span>Other methods may include using increasing round-trip delay values as indicators of increased network congestion.</span></p></li><li><p><span>Network-assisted congestion control mechanisms may use Explicit Congestion Notification, where a</span>
<span>router marks/updates a field in a packet flowing from sender to receiver to indicate congestion.</span></p><ul><li><span>Upon receipt of a marked packet, the receiver then notifies the sender of the congestion indication.</span></li></ul></li></ul></blockquote><blockquote><p><span>Tutorial Week 6 Question 4</span></p><p><strong><span>Suppose that the network is not congested. How does the congestion window size cwnd get increase in each transmission round in the Slow Start, Congestion Avoidance and Fast Recovery algorithms, respectively?</span></strong></p><ul><li><strong><span>Slow Start algorithm</span></strong><span>: cwnd gets doubled for each transmission round.</span></li><li><strong><span>Congestion Avoidance</span></strong><span>: cwnd gets increased by 1 MSS for each transmission round.</span></li><li><strong><span>Fast Recovery algorithm</span></strong><span>: cwnd gets increased by 1 MSS for each duplicate ACK.</span></li></ul><p><img src="Networking.assets/image-20200626145459240.png" referrerpolicy="no-referrer" alt="image-20200626145459240"></p></blockquote><blockquote><p><span>Tutorial Week 6 Question 5</span></p><p><strong><span>When will the congestion control enter into the Congestion Avoidance algorithm from the Slow Start algorithm?</span></strong></p><ul><li><span>When cwnd == ssthresh, it enters to the Congestion Avoidance algorithm to slow down the increment rate of cwnd.</span></li></ul></blockquote><blockquote><p><span>Tutorial Week 6 Question 6</span></p><p><strong><span>How does the Slow Start algorithm handle segment loss events?</span></strong></p><ul><li><span>For timeout event, set </span><code>ssthresh</code><span> = </span><code>cwnd</code><span>/2 and </span><code>cwnd</code><span> = 1, and continue the Slow Start algorithm.</span></li><li><span>For fast retransmission event, set </span><code>ssthresh</code><span> = cwnd/2 and cwnd = ssthresh + 3 * </span><code>MSS</code><span>, and enter to the Fast Recovery algorithm.</span></li></ul></blockquote><blockquote><p><span>Tutorial Week 6 Question 7</span></p><p><strong><span>How does the Slow Start algorithm handle segment loss events?</span></strong></p><ul><li><span>For timeout event, set ssthresh = cwnd=2 and cwnd = 1, and enter to the Slow Start algorithm.</span></li><li><span>For fast retransmission event, set </span><code>ssthresh</code><span> = cwnd/2 and cwnd = ssthresh + 3 * </span><code>MSS</code><span>, and enter to the Fast Recovery algorithm.</span></li></ul></blockquote><blockquote><p><span>Tutorial Week 6 Question 8</span></p><p><strong><span>For the fast retransmission event, why does it set cwnd = ssthresh + 3  MSS rather than cwnd = ssthresh?</span></strong></p><ul><li><span>This is because a fast retransmission event is caused by 3 duplicate ACK for a same segment, which means that the receiver must have successfully received at least 3 segments.</span></li></ul></blockquote><blockquote><p><span>Tutorial Week 6 Question 9</span></p><p><strong><span>How does the Fast Recovery algorithm perform?</span></strong></p><ul><li><span>For timeout event, set ssthresh = cwnd/2 and cwnd = 1, and enter to the Slow Start algorithm.</span></li><li><span>For each duplicate ACK, increase cwnd by 1 * MSS.</span></li><li><span>As soon as it receives a new ACK, cwnd = ssthresh and enter to the Congestion Avoidance algorithm.</span></li></ul></blockquote><blockquote><p><span>Tutorial Week 6 Question 10</span></p><ul><li><p><strong><span>The size of the TCP receive window never changes throughout the duration of the connection.</span></strong></p><ul><li><p><span>False. </span></p><ul><li><span>The size of the TCP receive window will change when data is</span>
<span>received (size decreases) to the buffer</span></li><li><span>and when the application on the receiver reads data from the buffer (size increases).</span></li></ul></li></ul></li><li><p><strong><span>Suppose Host A is sending Host B a large file over a TCP connection. The number of unacknowledged bytes that A sends cannot exceed the size of the receive window.</span></strong></p><ul><li><span>True</span></li><li><span>The sliding window protocol maintains the invariant that the number of unacknowledged bytes (last byte sent - last byte acknowledged) is less than or equal to the advertised receive window size.</span></li></ul></li><li><p><strong><span>Suppose Host A is sending a large file to Host B over a TCP connection. If the sequence number for a segment of this connection is m, then the sequence number for the subsequent segment will necessarily be m + 1.</span></strong></p><ul><li><span>False</span></li><li><span>The sequence number of the subsequent segment will depend on the number of bytes in the segment sent.</span></li></ul></li><li><p><span>The TCP segment has a field in its header for the receive window size.</span></p><ul><li><span>The Window Size field that appears immediately after the TCP flag sections refers to the Receive Window size.</span></li></ul></li></ul></blockquote><h2><a name="socket-programming" class="md-header-anchor"></a><span>Socket Programming</span></h2><h3><a name="berkeley-sockets" class="md-header-anchor"></a><span>Berkeley Sockets</span></h3><ul><li><p><span>Socket interface</span></p><ul><li><span>originally provided in Berkeley UNIX</span></li><li><span>later adopted by all popular operating systems</span></li><li><span>simplifies porting applications to different OSes</span></li></ul></li><li><p><span>In UNIX, everything is like a file</span></p><ul><li><span>all input is like reading a file</span></li><li><span>all output is like writing a file</span></li><li><span>file is “addressed” by an integer file descriptor</span></li></ul></li><li><p><span>API implemented as system calls</span></p><ul><li><span>examples include </span><code>connect()</code><span>, </span><code>read()</code><span>, </span><code>write()</code><span>, </span><code>close()</code></li></ul></li></ul><h3><a name="using-sockets-in-c" class="md-header-anchor"></a><span>Using Sockets in C</span></h3><p><img src="Networking.assets/image-20200624230205165.png" alt="image-20200624230205165" style="zoom: 50%;" /></p><p><img src="Networking.assets/image-20200624230216414.png" alt="image-20200624230216414" style="zoom:50%;" /></p><p><img src="Networking.assets/image-20200624230221945.png" alt="image-20200624230221945" style="zoom:50%;" /></p><p><img src="Networking.assets/image-20200624230232871.png" alt="image-20200624230232871" style="zoom:50%;" /></p><p><img src="Networking.assets/image-20200624230252693.png" alt="image-20200624230252693" style="zoom:50%;" /></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="C" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Headers</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;arpa/inet.h&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;sys/socket.h&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;netinet/in.h&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;netdb.h&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;unistd.h&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Variables</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">listenfd</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>, <span class="cm-variable">connfd</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">char</span> <span class="cm-variable">sendBuff</span>[<span class="cm-number">1025</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">char*</span> <span class="cm-variable">host</span> <span class="cm-operator">=</span> <span class="cm-string">"www.google.com"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">struct</span> <span class="cm-def">sockaddr_in</span> <span class="cm-def">serv_addr</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// DNS Lookup</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/* lookup the ip address */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">server</span> <span class="cm-operator">=</span> <span class="cm-variable">gethostbyname</span>(<span class="cm-variable">host</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Create a socket</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">listenfd</span> <span class="cm-operator">=</span> <span class="cm-variable">socket</span>(<span class="cm-variable">AF_INET</span>, <span class="cm-variable">SOCK_STREAM</span>, <span class="cm-number">0</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//initialise server address</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">memset</span>(<span class="cm-operator">&amp;</span><span class="cm-variable">serv_addr</span>, <span class="cm-string">'0'</span>, <span class="cm-keyword">sizeof</span>(<span class="cm-variable">serv_addr</span>)); </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//initialise send buffer</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">memset</span>(<span class="cm-variable">sendBuff</span>, <span class="cm-string">'0'</span>, <span class="cm-keyword">sizeof</span>(<span class="cm-variable">sendBuff</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Type of address – internet IP</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">serv_addr</span>.<span class="cm-variable">sin_family</span> <span class="cm-operator">=</span> <span class="cm-variable">AF_INET</span>; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Listen on ANY IP Addr</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">serv_addr</span>.<span class="cm-variable">sin_addr</span>.<span class="cm-variable">s_addr</span> <span class="cm-operator">=</span> <span class="cm-variable">htonl</span>(<span class="cm-variable">INADDR_ANY</span>); </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Listen on port 5000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">serv_addr</span>.<span class="cm-variable">sin_port</span> <span class="cm-operator">=</span> <span class="cm-variable">htons</span>(<span class="cm-number">5000</span>); </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/* Server side bind and listen*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Bind and listen</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">bind</span>(<span class="cm-variable">listenfd</span>, (<span class="cm-keyword">struct</span> <span class="cm-def">sockaddr</span><span class="cm-operator">*</span>)<span class="cm-operator">&amp;</span><span class="cm-variable">serv_addr</span>, <span class="cm-keyword">sizeof</span>(<span class="cm-variable">serv_addr</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// maximum number of client connections to queue</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">listen</span>(<span class="cm-variable">listenfd</span>, <span class="cm-number">10</span>); </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Accept</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">connfd</span> <span class="cm-operator">=</span> <span class="cm-variable">accept</span>(<span class="cm-variable">listenfd</span>, (<span class="cm-keyword">struct</span> <span class="cm-def">sockaddr</span><span class="cm-operator">*</span>)<span class="cm-variable">NULL</span>, <span class="cm-variable">NULL</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// send</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">snprintf</span>(<span class="cm-variable">sendBuff</span>, <span class="cm-keyword">sizeof</span>(<span class="cm-variable">sendBuff</span>), <span class="cm-string">"Hello World!"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">write</span>(<span class="cm-variable">connfd</span>, <span class="cm-variable">sendBuff</span>, <span class="cm-variable">strlen</span>(<span class="cm-variable">sendBuff</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/* Client side connect to server */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">connect</span>(<span class="cm-operator">*</span><span class="cm-variable">sockfd</span>, (<span class="cm-keyword">struct</span> <span class="cm-def">sockaddr</span> <span class="cm-operator">*</span>) <span class="cm-operator">&amp;</span><span class="cm-variable">serv_addr</span>, <span class="cm-keyword">sizeof</span>(<span class="cm-variable">serv_addr</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/* Receive */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">while</span> ( (<span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-variable">read</span>(<span class="cm-variable">connfd</span>, <span class="cm-variable">recvBuff</span>, <span class="cm-keyword">sizeof</span>(<span class="cm-variable">recvBuff</span>)<span class="cm-operator">-</span><span class="cm-number">1</span>)) <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">//process received buffer</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/* Close connection */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">close</span>(<span class="cm-variable">connfd</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1143px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1143px;"></div></div></div></pre><h3><a name="multi-threaded-web-server-n2045" class="md-header-anchor"></a><span>Multi-threaded Web Server</span></h3><ul><li><span>Clearly a web server needs to be able to handle concurrent connections from multiple clients</span></li><li><span>This can be achieved through the usage of a multi-threaded web server</span></li></ul><p><img src="Networking.assets/image-20200624234647683.png" alt="image-20200624234647683" style="zoom:50%;" /></p><p><img src="Networking.assets/image-20200625010213278.png" referrerpolicy="no-referrer" alt="image-20200625010213278"></p><blockquote><p><span>Tutorial Week 5 Question 2</span></p><p><span>Suppose that a Web server runs in Host C on port 80. Suppose this Web server uses persistent connections, and is currently receiving requests from</span>
<span>two different Hosts, A and B. Are all of the requests being sent through the same socket at Host C? If they are being passed through different sockets, do both of the sockets have port 80? Discuss and explain.</span></p><ul><li><span>When the requests from A and B are the &quot;connection requests&quot; at the be- ginning of the three-way handshake, these requests are sent to the same welcome socket at Host C, which will be handled by the dispatcher thread.</span></li><li><span>However, once the TCP connections are established between A and C, and B and C, each of A and B is allocated a dedicated connection socket, which is identified by a four-tuple: (source IP address, source port number, destination IP address, destination port number).</span></li><li><span>Therefore, the requests from A and B are then sent through different sockets as at least the source IP addresses of those sockets are different. Moreover, all those sockets have destination port number 80.</span></li></ul></blockquote><h1><a name="git" class="md-header-anchor"></a><span>Git</span></h1><h2><a name="what-is-git" class="md-header-anchor"></a><span>What is Git?</span></h2><ul><li><p><strong><span>Git</span></strong><span> track and control changes over files</span></p></li><li><p><span>Why use it?</span></p><ul><li><span>Collaboration</span></li><li><span>Revision history</span></li><li><span>Audit changes</span></li><li><span>Backup</span></li></ul></li></ul><h2><a name="vcs-history" class="md-header-anchor"></a><span>VCS History</span></h2><ul><li><span>Source Code Control System (SCCS) 1972 - Unix</span></li><li><span>Revision Control Systems – 1982</span></li><li><span>Concurrent Version Systems - 1986</span></li><li><span>BitKeeper – 2000 proprietary</span></li><li><span>Git – developed by Linus Torvalds</span></li></ul><p><img src="Networking.assets/image-20200625013731030.png" alt="image-20200625013731030" style="zoom: 67%;" /></p><h2><a name="architecture-n2092" class="md-header-anchor"></a><span>Architecture</span></h2><ul><li><p><span>Distributed version control</span></p><ul><li><span>Git stores changes remotely by syncing repositories</span></li></ul></li></ul><p><img src="Networking.assets/image-20200625013824168.png" alt="image-20200625013824168" style="zoom: 67%;" /></p><ul><li><strong><span>Data structure</span></strong><span>: Directed acyclic graph(DAG)</span></li></ul><p><img src="Networking.assets/image-20200625013827980.png" alt="image-20200625013827980" style="zoom: 50%;" /></p><p>&nbsp;</p><ul><li><strong><span>Working directory</span></strong><span>: top level folder with single version of the files</span></li><li><strong><span>Staging area</span></strong><span> – file in .git that records files to be added to next commit</span></li><li><code>.git</code><span> directory – configuration and repository database</span></li></ul><p><img src="Networking.assets/image-20200625014342187.png" alt="image-20200625014342187" style="zoom:50%;" /></p><h2><a name="storage" class="md-header-anchor"></a><span>Storage</span></h2><ul><li><p><span>Git does not store deltas (</span><strong><span>changes</span></strong><span>), it takes snapshots of the file system</span></p></li><li><p><span>Files that are the same are referenced, not duplicated</span></p></li><li><p><span>This is a big difference compared to other VCS</span></p><ul><li><span>Makes branching easier and cheaper</span></li></ul></li><li><p><span>Git occasionally packs those snapshots into single files, and uses delta compression to </span><strong><span>save space</span></strong></p><ul><li><span>git gc --aggressive</span></li></ul></li></ul><h2><a name="usage" class="md-header-anchor"></a><span>Usage</span></h2><ul><li><p><strong><span>init</span></strong><span>: initialise a git repo</span></p></li><li><p><strong><span>Staging</span></strong><span> is the process of marking the file as to be included in the next commit</span></p></li><li><p><strong><span>Checks out</span></strong><span>: switches the working tree to a particular commit/branch</span></p></li><li><p><strong><span>Branches</span></strong><span> are just text files pointing to a different commit</span></p></li><li><p><strong><span>Pull</span></strong><span>: Fetch retrieves any changes from the remote (origin)</span></p></li><li><p><strong><span>Merge</span></strong><span>: combines those changes into the local repo</span></p></li><li><p><strong><span>Push</span></strong><span>: transfers your local commits to the remote repo</span></p><ul><li><p><code>Git push &lt;remote&gt; &lt;branch&gt;</code></p><ul><li><span>Creates a branch in the destination repository</span></li><li><span>Push only allowed for fast-forward merge</span></li><li><span>Non fast-forward merge: cannot make changes on the remote without losing commits</span></li></ul></li></ul></li><li><p><strong><span>remote</span></strong><span>: Adds remote to a local repository – useful when creating a new repository</span></p><ul><li><span>git remote add remotename host:/dir.git</span></li><li><span>Can have multiple remotes for a single repository</span></li></ul></li><li><p><strong><span>Tags</span></strong><span>: can be used to add more informative names to commits, i.e. releases 1.0</span></p></li><li><p><strong><span>Binary File</span></strong><span>:</span></p><ul><li><span>Git automatically packs file changes using delta compression</span></li><li><span>Increases the size of the clone operation</span></li><li><span>Binary files typically exhibit large changes</span></li></ul></li><li><p><strong><span>Fork</span></strong></p><ul><li><span>Link remains to parent</span></li><li><span>Useful for large changes, keep development work out of main repository</span></li><li><span>Remains even if original repository is removed</span></li></ul></li></ul><h2><a name="risks" class="md-header-anchor"></a><span>Risks</span></h2><ul><li><p><span>Build processes that depend on external repositories are fragile</span></p><ul><li><p><span>A user deletes the repository -&gt; build process breaks</span></p></li><li><p><span>Risk of unknown code changes in builds</span></p></li><li><p><span>Better to fork the repository</span></p><ul><li><span>Higher support costs – need to pull changes</span></li></ul></li></ul></li><li><p><span>Github allows recreating deleted users</span></p><ul><li><span>Serious security concern – inject malicious code</span></li></ul></li><li><p><strong><span>Credentials Leak</span></strong><span> Be careful what you store in public repositories</span></p><ul><li><span>Never store credentials AWS keys</span></li></ul></li></ul><h2><a name="git-question" class="md-header-anchor"></a><span>Git Question</span></h2><blockquote><p><span>Tutorial 5 Question 7</span></p><p><span>Imagine you were going to reimplement git. What algorithm would you use to merge two sets of changes to a text le? Think about how fast your</span>
<span>scheme would be, and how accurate it would be.</span></p><ul><li><p><span>compare each new version to the shared parent. A line-based difference like diff would be suitable.</span></p></li><li><p><span>This finds the line numbers of the lines are that inserted, are deleted and that are changed, but doesn&#39;t consider which characters within a line are changed.</span></p></li><li><p><span>&quot;replay&quot; the two sets of inserts and deletes on the original file</span></p></li><li><p><span>An insertion by one difference will change the line numbers of subsequent lines in the combined le, and so the merger would need to keep track of that.</span></p></li><li><p><span>If a line is changed in only one of the new les, then the line in the output will be the line from the corresponding new file.</span></p></li><li><p><span>If a line is changed in both new les, then either the line is the same in both new fles, or it is different.</span></p><ul><li><span>If it is the same, then the line in the output will be the line from the new fles.</span></li><li><span>Otherwise, there is a &quot;conflict&quot;, which has to be resolved either manually or by a more advanced algorithm.</span></li></ul></li></ul></blockquote><h1><a name="original-flow--loss-control" class="md-header-anchor"></a><span>Original flow + loss control</span></h1><ul><li><p><span>Flow+loss control had existed on single point-to-point links for a long time</span></p></li><li><p><span>TCP originally used the experience from the link layer</span></p><ul><li><span>Caused bad design decision</span></li></ul></li></ul><h2><a name="go-back-n" class="md-header-anchor"></a><span>Go-back-N</span></h2><p><img src="Networking.assets/image-20200625020409241.png" alt="image-20200625020409241" style="zoom:50%;" /></p><h3><a name="sender" class="md-header-anchor"></a><span>Sender</span></h3><ul><li><p><span>sender can have up to N unacked packets in pipeline</span></p></li><li><p><span>sender has </span><strong><span>ONE</span></strong><span> timer for oldest unacked packet</span></p><ul><li><span>when timer expires, retransmit packet n and all higher seq # packets in window</span></li></ul></li></ul><h3><a name="receiver" class="md-header-anchor"></a><span>Receiver</span></h3><ul><li><p><span>receiver always send ACK for correctly-received pkt with highest in-order seq</span></p><ul><li><strong><span>cumulative ack</span></strong><span>: ACKs all pkts up to, including # n</span><span>	</span></li><li><span>may generate duplicate ACKs</span></li><li><span>doesn’t ack packet if there’s a gap</span></li></ul></li><li><p><span>receiver </span><strong><span>discard</span></strong><span> out-of-order packets</span></p><ul><li><span>discard (don’t buffer): no receiver buffering!</span></li><li><span>re-ACK pkt with highest in-order seq #</span></li></ul></li><li><p><strong><span>Advantage</span></strong><span>: Receiver doesn’t need to store/reorder packets</span></p></li><li><p><strong><span>Disadvantage</span></strong><span>: wasteful, causing Congestion collapse</span></p></li></ul><p><img src="Networking.assets/image-20200625020930095.png" alt="image-20200625020930095" style="zoom:50%;" /></p><h2><a name="selective-repeat" class="md-header-anchor"></a><span>Selective Repeat</span></h2><p><img src="Networking.assets/image-20200625022044519.png" alt="image-20200625022044519" style="zoom:50%;" /></p><h3><a name="sender-n2273" class="md-header-anchor"></a><span>Sender</span></h3><ul><li><p><span>sender can have up to N unack’ed packets in pipeline</span></p></li><li><p><span>sender maintains timer for each unacked packet</span></p><ul><li><span>when timer expires, retransmit only that unacked packet</span></li></ul></li></ul><h3><a name="receiver-n2282" class="md-header-anchor"></a><span>Receiver</span></h3><ul><li><span>receiver sends individual ack for each correctly received packet</span></li><li><span>receiver buffers out-of-order packets</span></li></ul><p><img src="Networking.assets/image-20200625022234903.png" alt="image-20200625022234903" style="zoom:50%;" /></p><p><strong><span>Advantage:</span></strong><span> efficient - only retransmit the lost packet</span></p><p><strong><span>Disadvantage</span></strong><span>: </span></p><ul><li><span>need to buffer out-of-order packets</span></li><li><span>more complex, only helps if loss is common</span></li></ul><h2><a name="congestion-collapse" class="md-header-anchor"></a><span>Congestion collapse</span></h2><ul><li><strong><span>When</span></strong><span>: In the late 1980s, the internet had “congestion collapse”</span></li><li><strong><span>What</span></strong><span>: Router buffers were overflowing, causing high loss</span></li><li><strong><span>Why</span></strong><span>: Senders were doing go-back-N, so that every packet loss caused N more packets to enter the system</span></li><li><strong><span>Solution</span></strong><span>: Selective repeat (“fast retransmit”)</span></li></ul><h3><a name="question" class="md-header-anchor"></a><span>Question </span></h3><blockquote><p><span>Tutorial  5 Question 3</span></p><p><span>A negative acknowledgement tells the sender that a particular packet has not been received, rather than that a packet has been received. Consider</span>
<span>a reliable data transfer protocol that uses only negative acknowledgments. </span></p><ul><li><span>Suppose the sender sends data only infrequently. Would a NAK-only protocol be preferable to a protocol that uses ACKs? Why?</span></li><li><span>In a NAK only protocol, the loss of packet x is only detected by the receiver when packet x+1 is received.</span></li><li><span>If there is a long delay between the transmission of x and the transmission of x+1, then it will be a long time until x can be recovered, under a NAK only protocol.</span></li><li><span>Now suppose the sender has a lot of data to send and the end-to-end connection experiences few losses. In this second case, would a NAK-only protocol be preferable to a protocol that uses ACKs? Why?</span></li><li><span>if data is being sent often, then recovery under a NAK- only scheme could happen quickly.</span></li><li><span>Moreover, if errors are infrequent, then NAKs are only occasionally sent (when needed), and ACK are never sent a significant reduction in feedback in the NAK-only case over the ACK only case.</span></li></ul></blockquote><h1><a name="internet-network-layer" class="md-header-anchor"></a><span>Internet (network) Layer</span></h1><h2><a name="role-n2324" class="md-header-anchor"></a><span>Role</span></h2><ul><li><p><strong><span>Goal</span></strong><span>: Get data from the source all the way to the destination</span></p><ul><li><span>May not be in a single hop (point-to-point link)</span></li></ul></li><li><p><strong><span>Efficiency</span></strong><span>: Route Traffic efficiently</span></p></li><li><p><strong><span>Network layer addressing</span></strong><span>: Nodes must be given names (addresses)</span></p></li></ul><h2><a name="where" class="md-header-anchor"></a><span>Where</span></h2><ul><li><span>Most Network Layer code runs on routers</span></li><li><span>We will refer to the protocol data units as packets</span></li></ul><h2><a name="services-n2341" class="md-header-anchor"></a><span>Services</span></h2><h3><a name="connectionlessdatagram-network" class="md-header-anchor"></a><span>Connectionless(“datagram” network)</span></h3><ul><li><span>Packet switching (Internet Protocol - IP)</span></li><li><span>Minimum required service: “send packet”</span></li></ul><h3><a name="connection-orientedvirtual-circuit-network" class="md-header-anchor"></a><span>Connection-oriented(“virtual circuit” network)</span></h3><ul><li><p><span>(virtual) Circuit Switching</span></p><ul><li><span>Asynchronous Transfer Mode – ATM</span></li><li><span>MultiProtocol Label Switching MPLS</span></li></ul></li><li><p><span>These usually act as a single “link” of an IP network  </span></p></li></ul><h2><a name="routing" class="md-header-anchor"></a><span>Routing</span></h2><ul><li><span>Routing is the process of nding which output link a packet should be forwarded on (populating the forwarding table).</span></li></ul><h3><a name="routing-table" class="md-header-anchor"></a><span>Routing table</span></h3><ul><li><p><span>Routing tables are typically based around a triple</span></p><ul><li><span>Destination IP Address (base)</span></li><li><span>Subnet Mask</span></li><li><span>Outgoing Line (physical or virtual)</span></li></ul></li><li><p><span>For example: </span><code>203.32.8.0</code><span> </span><code>255.255.255.0</code><span> </span><code>Eth 0</code></p><ul><li><span>If address matches </span><code>203.32.8.0</code></li><li><span>in the bits specified by </span><code>255.255.255.0</code></li><li><span>send the packet to </span><code>Eth 0</code></li></ul></li><li><p><span>Longest mask always used when choosing a route</span></p></li></ul><h3><a name="route-aggregation" class="md-header-anchor"></a><span>Route Aggregation</span></h3><ul><li><p><strong><span>Problem</span></strong><span>: Size of routing table grows too big in Classless InterDomain Routing</span></p><ul><li><span>Particular problem for routers at the centre of the internet, they have to maintain routes to almost everywhere</span></li><li><strong><span>Impacts</span></strong><span> on both lookup and table exchange</span></li></ul></li><li><p><strong><span>Solution</span></strong><span>: route aggregation</span></p><ul><li><span>combines multiple prefixes into a larger prefix</span></li><li><span>Beneficial for routers further away from the network, which don’t need to consider the routing that is required closer to the destination</span></li></ul></li><li><p><span>Aggregation is performed automatically</span></p><ul><li><span>Currently it roughly halves the size of the routing table</span></li><li><span>Prefixes can overlap, in which case </span><strong><span>the longest matching prefix is selected</span></strong></li></ul></li></ul><p><img src="Networking.assets/image-20200626100604463.png" referrerpolicy="no-referrer" alt="image-20200626100604463"></p><h3><a name="routing-algorithm" class="md-header-anchor"></a><span>Routing algorithm</span></h3><ul><li><p><strong><span>Routing algorithm</span></strong><span>: decides which output line an incoming packet should be transmitted on</span></p><ul><li><p><span>Combination of</span></p><ul><li><span>an algorithm local to each router</span></li><li><span>a protocol to gather the network information needed by the algorithm</span></li></ul></li><li><p><span>Properties of a good routing algorithm</span></p><ul><li><strong><span>Correctness</span></strong><span>: finds a valid route between all pairs of nodes</span></li><li><strong><span>Simplicity</span></strong></li><li><strong><span>Robustness</span></strong><span>: a router crash should not require a ‘network’ reboot</span></li><li><strong><span>Stability</span></strong><span>: a stable algorithm reaches equilibrium and stays there</span></li><li><strong><span>Fairness</span></strong></li><li><strong><span>Efficiency</span></strong></li><li><strong><span>Flexibility</span></strong><span> to implement policies</span></li></ul></li></ul></li></ul><h4><a name="goal" class="md-header-anchor"></a><span>Goal</span></h4><ul><li><strong><span>Fairness</span></strong><span> vs. </span><strong><span>Efficiency</span></strong></li></ul><p><img src="Networking.assets/image-20200626092221770.png" alt="image-20200626092221770" style="zoom:50%;" /></p><ul><li><p><strong><span>Delay</span></strong><span> vs. </span><strong><span>Bandwidth</span></strong></p><ul><li><p><span>Minimise the number of hops a packet has to make</span></p><ul><li><span>Tends to reduce per packet bandwidth and improve delay</span></li><li><span>Hopefully also reduces the distance travelled – but not guaranteed</span></li></ul></li><li><p><span>Actual algorithms give a cost to each link</span></p><ul><li><span>More flexible, but still cannot express all routing preferences</span></li></ul></li></ul></li></ul><figure><table><thead><tr><th>&nbsp;</th><th><span>Non-adaptive (static routing)</span></th><th><span>Adaptive</span></th></tr></thead><tbody><tr><td><strong><span>Adaptivity</span></strong></td><td><span>Does not adapt to the network topology</span></td><td><span>Dynamic routing, adapts to changes in topology and potentially even traffic levels</span></td></tr><tr><td>&nbsp;</td><td><span>Calculated ‘offline’ and uploaded to the router at boot</span></td><td><span>may get information from adjacent routers, or all routers in the network</span></td></tr><tr><td><strong><span>Response to Failure</span></strong></td><td><span>Does not respond to failure</span></td><td><span>respond to failure</span></td></tr><tr><td><strong><span>When to use</span></strong></td><td><span>Reasonable where there is a clear or implicit choice</span></td><td><span>-</span></td></tr><tr><td><strong><span>Optimization</span></strong></td><td><span>-</span></td><td><span>distance, hops, estimated transit time, etc</span></td></tr></tbody></table></figure><h4><a name="flooding" class="md-header-anchor"></a><span>Flooding</span></h4><ul><li><p><strong><span>Guarantees</span></strong><span> shortest distance and minimal delay</span></p></li><li><p><span>Useful benchmark in terms of speed</span></p></li><li><p><strong><span>Advantage</span></strong><span>: Extremely robust</span></p><ul><li><span>f there is a path it will find it</span></li></ul></li><li><p><strong><span>Disadvantag</span></strong><span>e: Highly inefficient</span></p><ul><li><span>generates many duplicate packets</span></li></ul></li><li><p><span>Have to have a way of discarding packets (TTL)</span></p><ul><li><span>If unknown can be set to diameter of network</span></li></ul></li></ul><h4><a name="optimality-principle" class="md-header-anchor"></a><span>Optimality Principle</span></h4><ul><li><span>If router </span><code>J</code><span> is on the optimal path from router </span><code>I</code><span> to </span><code>K</code><span>, then the optimal path from </span><code>J</code><span> to </span><code>K</code><span> also falls along the same route.</span></li></ul><p><img src="Networking.assets/image-20200626093138846.png" referrerpolicy="no-referrer" alt="image-20200626093138846"></p><h4><a name="sink-tree" class="md-header-anchor"></a><span>Sink Tree</span></h4><ul><li><span>The optimality principle means that a set of optimal routes from all sources form a tree rooted at the destination</span></li></ul><p><img src="Networking.assets/image-20200626093228471.png" referrerpolicy="no-referrer" alt="image-20200626093228471"></p><p>&nbsp;</p><h4><a name="shortest-path-algorithm" class="md-header-anchor"></a><span>Shortest Path Algorithm</span></h4><ul><li><p><span>View as a labelled graph</span></p></li><li><p><span>Label weight based on delay, distance, cost, etc.</span></p></li><li><p><span>At each step, each node is labelled with its distance (sum of costs on edges) from the source and the best known path</span></p></li><li><p>&nbsp;</p></li></ul><h4><a name="link-state-routing" class="md-header-anchor"></a><span>Link State Routing</span></h4><ul><li><p><span>Replaced Distance Vector Routing (“Bellman-Ford”) that had problems with </span><strong><span>converging quickly enough</span></strong></p></li><li><p><span>Link state routing distributes the topology, Everyone then performs </span><strong><span>centralised routing</span></strong></p></li><li><p><span>5 step process each router must follow</span></p><ol start='' ><li><p><strong><span>Discover its neighbours</span></strong><span> and learn their network address</span></p><ul><li><span>To discover neighbours, a router on boot sends out a HELLO packet on each interface.</span></li><li><span>The router on the other end must reply with its unique ID</span></li></ul></li><li><p><strong><span>Set the distance</span></strong><span> or cost metric to each of its neighbours</span></p><ul><li><p><span>Cost can be set automatically or manually</span></p><ul><li><span>Common technique is bandwidth 1 Gbps = 1, 100 Mbps = 10</span></li><li><span>Could use delay as well – calculated using an ECHO packet</span></li><li><strong><span>Traffic engineering</span></strong><span>: Many networks manually choose preferred routes and then look for link costs to make those routes the shortest.</span></li></ul></li></ul></li><li><p><strong><span>Construct</span></strong><span> a packet containing all it has just learned</span></p><ul><li><p><span>Link State Packet consists of ID, sequence number, age, and a list of neighbours and their respective costs</span></p></li><li><p><span>Building the packet is easy, deciding </span><strong><span>when to build them is difficult</span></strong></p><ul><li><span>At intervals?</span></li><li><span>When a change occurs – link disconnect?</span></li></ul></li><li><p><img src="Networking.assets/image-20200626094059288.png" alt="image-20200626094059288" style="zoom:50%;" /></p></li></ul></li><li><p><span>Send the packet to, and receive packets from, all other routers</span></p><ul><li><p><strong><span>reliable flooding</span></strong><span> is used to send packets to all other routers</span></p><ul><li><span>acknowledgements are used to guarantee every other router receives the packet</span></li></ul></li><li><p><strong><span>comparing seq #</span></strong></p><ul><li><strong><span>Length</span></strong><span>: Sequence numbers are 32 bits to avoid wrap-around</span></li><li><span>When a router receives a Link State Packet it compares the sequence number to the one it previously received</span></li><li><span>If the sequence number is not larger it discards it and does not forward on the flood</span></li></ul></li><li><p><strong><span>age</span></strong></p><ul><li><span>age is reduced by 1 each second</span></li><li><span>when the age hits zero the information is discarded</span></li><li><span>resolve the problem that if a router crashes and restarts its sequence number from 0</span></li></ul></li></ul></li><li><p><span>Compute the shortest path to every other router</span></p><ul><li><strong><span>centralised alrotihm</span></strong></li></ul></li></ol></li></ul><h4><a name="distance-vector-routing" class="md-header-anchor"></a><span>Distance vector Routing</span></h4><ul><li><p><span>Distance vector routing uses a </span><strong><span>true distributed algorithm</span></strong></p><ul><li><p><span>Nodes announces the distance from themselves to each destination</span></p></li><li><p><span>When they receive a new announcement of others’ distances,</span></p><ul><li><span>they update their own estimates</span></li><li><span>and make a new announcement</span></li></ul></li><li><p><span>Bellman Ford algorithm</span></p></li></ul></li></ul><h3><a name="border-gateway-protocol-bgp" class="md-header-anchor"></a><span>Border Gateway Protocol (BGP)</span></h3><ul><li><p><strong><span>Autonomous Systems (AS)</span></strong><span>: collections of routers under the same administrative control</span></p></li><li><p><span>Each network will have</span></p><ul><li><p><span>A protocol for internal routing (usually based on linked state)</span></p></li><li><p><span>A protocol for external routing between ASes</span></p><ul><li><span>Must be the same for all ASes</span></li></ul></li></ul></li><li><p><span>In contrast to the internal routing, BGP needs to consider </span><strong><span>politics</span></strong><span> as well</span></p><ul><li><span>Companies not willing to have their network used by others</span></li><li><span>ISPs not wanting other ISPs’ traffic on their networks</span></li><li><span>Not carrying commercial traffic on academic networks</span></li><li><span>Use one provider over another because they are cheaper</span></li><li><span>Don’t send traffic through certain companies or countries because we don&#39;t trust them</span></li></ul></li><li><p><span>Can’t always say one route is “better” than another</span></p><ul><li><span>Better in some respects, worse in others</span></li><li><span>Bellman’s optimality principle doesn’t always apply</span></li></ul></li><li><p><span>Roles in BGP</span></p><ul><li><p><strong><span>Customer/provider</span></strong><span>: pay you for “transit” of traffic I send or receive</span></p><ul><li><strong><span>Provider</span></strong><span> advertises routes for the entire internet</span></li><li><strong><span>Customer</span></strong><span> only advertises routes for their network to avoid transiting other traffic</span></li></ul></li><li><p><strong><span>peering agreements</span></strong><span>: we carry each others’ traffic without charge</span></p></li></ul></li></ul><p><img src="Networking.assets/image-20200626095513464.png" referrerpolicy="no-referrer" alt="image-20200626095513464"></p><ul><li><p><strong><span>Attack</span></strong><span>: </span></p><ul><li><p><span>A malicious AS can advertise routes for networks at extremely low cost, causing traffic to re-routed through that AS</span></p><ul><li><span>2017 Russian AS advertised routes for Google,Apple, Facebook, Microsoft, Twitter, etc.</span></li><li><span>2008 Pakistan attempted to block YouTube, but inadvertently blocked it for the entire internet</span></li></ul></li><li><p><span>an effective way to divert traffic for monitoring or disruption</span></p></li></ul></li></ul><h2><a name="packet-forwarding" class="md-header-anchor"></a><span>Packet forwarding</span></h2><ul><li><p><span>Forwarding is the process of using the forwarding table to send a packet of of the correct link.</span></p></li><li><p><span>Each router has a forwarding table (or routing table).</span></p><ul><li><span>This maps destination addresses to outgoing interfaces.</span></li></ul></li><li><p><span>Upon receiving a packet</span></p><ul><li><span>inspect the destination IP address in the header</span></li><li><span>index into the table</span></li><li><span>determine the outgoing interface</span></li><li><span>forward the packet out that interface</span></li></ul></li><li><p><span>The packet travels along the path to the destination.</span></p></li></ul><h3><a name="connectionless-n2698" class="md-header-anchor"></a><span>Connectionless</span></h3><ul><li><p><span>The internet is a packet switched network</span></p></li><li><p><span>Host H1 wants to send a packet to H2</span></p><ol start='' ><li><span>Transmits it to the nearest router (A)</span></li><li><span>The packet is buffered while it is arriving, and the checksum is verified</span></li><li><span>If valid, the packet is stored until the outgoing interface is free</span></li><li><span>The router forwards the packet onto the next router in the path</span></li><li><span>Repeat 2-4</span></li></ol></li><li><p><span>Paths can change for packets in the same transport layer connection</span></p></li><li><p><strong><span>Forwarding tables</span></strong><span> (also called routing tables)</span></p></li></ul><p><img src="Networking.assets/image-20200625101306541.png" referrerpolicy="no-referrer" alt="image-20200625101306541"></p><h3><a name="connection-oriented" class="md-header-anchor"></a><span>Connection-oriented</span></h3><ul><li><p><span>Forwarding table:</span></p><ul><li><span>“In”: connection ID</span></li><li><span>“Out”: next hop and new connection number</span></li></ul></li><li><p><span>Connection number is local to a hop</span></p></li></ul><p><img src="Networking.assets/image-20200625101542460.png" referrerpolicy="no-referrer" alt="image-20200625101542460"></p><h4><a name="multiprotocol-label-switching" class="md-header-anchor"></a><span>MultiProtocol Label Switching</span></h4><ul><li><p><span>Widely deployed Virtual Circuit (connection-oriented) Network</span>
<span>Layer Protocol (below the internet sublayer)</span></p></li><li><p><span>Purpose is </span><strong><span>Quality of Service</span></strong></p><ul><li><span>Prioritising traffic</span></li><li><span>Service Level Agreements for network performance</span></li><li><span>Reliable connectivity with known parameters</span></li></ul></li><li><p><span>Popular with businesses that want to connect multiple sites and phone companies carrying voice traffic</span></p></li></ul><h3><a name="connection-oriented-vs-connectionless" class="md-header-anchor"></a><span>Connection-oriented vs Connectionless</span></h3><figure><table><thead><tr><th><span>Issue</span></th><th><span>Datagram Network</span></th><th><span>Virtual Circuit</span></th></tr></thead><tbody><tr><td><span>Type</span></td><td><span>Connectionless</span></td><td><span>Connection-oriented</span></td></tr><tr><td><span>Addressing</span></td><td><span>Each packet has full source and destination</span></td><td><strong><span>Each packet contains a short VC number</span></strong></td></tr><tr><td><span>State</span></td><td><strong><span>Routers do not hold state information about connections</span></strong></td><td><span>Each VC requires router table space Router table will be lost if router reboots</span></td></tr><tr><td><span>Routing</span></td><td><span>Each packet independently</span></td><td><span>Defined at set-up</span></td></tr><tr><td><span>Quality of Service</span></td><td><span>Difficult</span></td><td><strong><span>Easy if enough resources</span></strong></td></tr><tr><td><span>Congestion control</span></td><td><span>Difficult</span></td><td><strong><span>Easy if enough resources</span></strong></td></tr><tr><td><span>Cost</span></td><td><span>Relatively cheap</span></td><td><span>Expensive</span></td></tr></tbody></table></figure><h2><a name="quality-of-service" class="md-header-anchor"></a><span>Quality of Service</span></h2><h3><a name="why-is-quality-of-service-qos-important" class="md-header-anchor"></a><span>Why is Quality of Service (QoS) important</span></h3><ul><li><p><span>Not all services are equally important or robust to network delay</span></p><ul><li><span>VoIP vs file downloads</span></li><li><span>VPN connections vs web browsing</span></li></ul></li><li><p><span>Within your own network, or within a single administered network (ISP), services can be prioritised</span></p><ul><li><p><span>Own network - typically explicitly</span></p><ul><li><span>the Differentiated Services header can be used to define classes of traffic</span></li></ul></li><li><p><span>Shared network - typically implicitly (ISP traffic shaping)</span></p></li></ul></li></ul><h2><a name="internet-protocol" class="md-header-anchor"></a><span>Internet Protocol</span></h2><ul><li><p><strong><span>Responsibility</span></strong><span>: Responsible for moving the packets through the various networks from source to destination host</span></p></li><li><p><strong><span>Paths</span></strong></p><ul><li><span>Multiple paths through the network</span></li><li><span>Important for redundancy</span></li><li><span>Routing algorithms are used to determine best path</span></li></ul></li><li><p><strong><span>Guarantee</span></strong><span>: IP is an best effort protocol</span></p><ul><li><span>no guarantee on performance</span></li></ul></li><li><p><strong><span>Principles</span></strong><span>: Designed with a number of principles in mind, including</span></p><ul><li><strong><span>OK</span></strong><span> is better than an ideal standard “in progress”</span></li><li><span>Keep it simple</span></li><li><span>Be strict when sending and tolerant when receiving</span></li><li><span>Make clear choices</span></li><li><span>Avoid static options and parameters – negotiate them at runtime</span></li><li><span>scalability</span></li></ul></li></ul><h2><a name="ip-addressing" class="md-header-anchor"></a><span>IP Addressing</span></h2><h3><a name="ipv4-addresses" class="md-header-anchor"></a><span>IPv4 Addresses</span></h3><ul><li><p><strong><span>Length</span></strong><span>: 32-bit number</span></p></li><li><p><strong><span>Lowest</span></strong><span>: 0.0.0.0</span></p></li><li><p><strong><span>Highest</span></strong><span>: 255.255.255.255</span></p></li><li><p><strong><span>Allocation</span></strong></p><ul><li><span>Overall IP allocation responsibility of Internet Corporation for Assigned Names and Numbers (ICANN) by delegation to</span>
<span>IANA and Regional Internet Registries (RIR’s)</span></li></ul></li><li><p><strong><span>Interfaces not hosts</span></strong><span> : addresses are given to interfaces not hosts</span></p></li><li><p><strong><span>Supply</span></strong><span>: Supply of IPv4 addresses has basically been exhausted</span></p><p>&nbsp;</p></li></ul><h3><a name="classes" class="md-header-anchor"></a><strong><span>Classes</span></strong></h3><ul><li><span>Originally IP addresses were allocated based on classes</span></li><li><span>Routing was performed based on the class, which could be derived from the first part of the address</span></li><li><img src="Networking.assets/image-20200625112423391.png" alt="image-20200625112423391" style="zoom:50%;" /></li></ul><h3><a name="classless-inter-domain-routing" class="md-header-anchor"></a><span>Classless Inter Domain Routing</span></h3><ul><li><p><span>Classes simplify routing</span></p></li><li><p><span>Wasteful. Networks often much bigger than needed</span></p><ul><li><span>Network with 260 nodes must be class B with 65,536 addresses</span></li></ul></li><li><p><span>Classless Inter Domain Routing</span></p><ul><li><p><span>Each interface / route explicitly specifies which bits are the “network” field</span></p></li><li><p><span>Network with 260 nodes only needs 9 bits for “host” field</span></p><ul><li><span>512 addresses</span></li><li><span>Can have 128 times as many of these networks as class B networks</span></li></ul></li></ul></li><li><p><span>Hierarchical - encodes the network and host number</span></p><ul><li><p><strong><span>Network</span></strong><span> in top bits</span></p></li><li><p><strong><span>Host</span></strong><span> in bottom bits</span></p></li><li><p><strong><span>disadvantages</span></strong></p><ul><li><span>can be quite wasteful if not carefully assigned</span></li></ul></li></ul></li></ul><h3><a name="prefixing" class="md-header-anchor"></a><span>Prefixing</span></h3><ul><li><p><strong><span>Prefix</span></strong><span>: A network corresponds to a contiguous block of IP address space, called a prefix</span></p><ul><li><p><span>Prefixes are written as the lowest IP address followed by a slash and the size of the network portion - 192.0.2.0/24</span></p></li><li><p><span>Can also be written as a subnet mask, a binary mask of 1’s</span></p><ul><li><img src="Networking.assets/image-20200625113042048.png" alt="image-20200625113042048" style="zoom: 50%;" /></li></ul></li></ul></li><li><p><strong><span>Blocks</span></strong></p></li></ul><figure><table><thead><tr><th><span>IP</span></th><th><span>Network</span></th><th><span>Host</span></th><th><span>Subnet mask</span></th></tr></thead><tbody><tr><td><span>192.0.2.0/24</span></td><td><span>24 bits are for the network </span><strong><span>192.0.2</span></strong><span>.0</span></td><td><span>8 bits for hosts – up to 256 addresses</span></td><td><span>255.255.255.0</span></td></tr><tr><td><span>10.0.0.0/8</span></td><td><span>8 bits are for the network </span><strong><span>10</span></strong><span>.0.0.0</span></td><td><span>24 bits for hosts – up to 16,777,216 addresses</span></td><td><span>255.0.0.0</span></td></tr></tbody></table></figure><ul><li><p><strong><span>Network number</span></strong><span> = network mask (bitwise-AND) IP address</span></p></li><li><p><strong><span>Prefixing</span></strong><span> is crucial for efficient routing on the internet</span></p><ul><li><span>Since networks are assigned in blocks, intermediary routers need only maintain routes for the prefixes, not every individual host</span></li><li><span>Only when the packet arrives at the destination network does the host portion need to be read</span></li></ul></li></ul><h3><a name="route-aggregation-n2934" class="md-header-anchor"></a><span>Route aggregation</span></h3><ul><li><span>Aggregation is performed automatically</span></li><li><span>Currently it roughly halves the size of the routing table</span></li></ul><p><img src="Networking.assets/image-20200625113510142.png" alt="image-20200625113510142" style="zoom:80%;" /></p><ul><li><span>Prefixes can overlap, in which case the </span><strong><span>longest matching prefix is selected</span></strong></li></ul><p><img src="Networking.assets/image-20200625113538154.png" alt="image-20200625113538154" style="zoom: 80%;" /></p><p>&nbsp;</p><h3><a name="special-ip-addresses" class="md-header-anchor"></a><span>Special IP Addresses</span></h3><p><img src="Networking.assets/image-20200625113610404.png" alt="image-20200625113610404" style="zoom:50%;" /></p><h3><a name="ipv6" class="md-header-anchor"></a><span>IPv6</span></h3><p><img src="Networking.assets/image-20200625114141046.png" alt="image-20200625114141046" style="zoom:50%;" /></p><ul><li><p><strong><span>Length</span></strong><span>: IPv6 addresses are </span><strong><span>128</span></strong><span> bits</span></p><ul><li><p><span>Written as 8 groups of 4 hex digits</span></p><ul><li><code>8000:0000:0000:0000:0123:4567:89AB:CDEF</code></li></ul></li><li><p><span>Can be optimised by stripping one group of consecutive 0’s</span></p><ul><li><code>8000::123:4567:89AB:CDEF</code></li></ul></li><li><p><span>Backwards compatibility with IPv4</span></p><ul><li><code>::ffff:192.31.2.46</code><span> (note the mix of hex with decimal)</span></li></ul></li></ul></li><li><p><strong><span>Problem to address</span></strong><span>: Designed to address the problem of exhausting the IPv4 address space</span></p></li><li><p><span>Whilst solving that problem some other changes were made</span></p><ul><li><span>Simpler header – allows faster processing</span></li><li><span>Improved security – now back-ported to IPv4</span></li><li><span>Further Quality of Service support</span></li></ul></li></ul><h2><a name="ip-header" class="md-header-anchor"></a><span>IP Header</span></h2><p>&nbsp;</p><p><img src="Networking.assets/image-20200625111622412.png" referrerpolicy="no-referrer" alt="image-20200625111622412"></p><h3><a name="ip-version-4-protocol" class="md-header-anchor"></a><span>IP Version 4 Protocol</span></h3><p><img src="Networking.assets/image-20200625111613411.png" alt="image-20200625111613411" style="zoom: 67%;" /></p><figure><table><thead><tr><th><span>Field</span></th><th><span>Usage</span></th></tr></thead><tbody><tr><td><span>Version</span></td><td><span>Protocol version 4</span></td></tr><tr><td><span>IHL</span></td><td><span>Header length in 32 bit words(min 5, max 15)</span></td></tr><tr><td><span>Differentiated services</span></td><td><span>6 bits for service class + 2 bits for congestion control (ECN)</span></td></tr><tr><td><span>Total length</span></td><td><span>Including payload, max 65,535</span></td></tr><tr><td><span>Identification, DF, MF, Fragment Offset</span></td><td><span>Used in the handling of fragmentation</span></td></tr><tr><td><span>Time to live (TTL)</span></td><td><span>Countdown of hops, at zero packet is discarded</span></td></tr><tr><td><span>Protocol</span></td><td><span>Transport layer service (TCP/UDP/SCTP/DCCP/etc.)</span></td></tr><tr><td><span>Source and Destination</span></td><td><span>IPv4 address</span></td></tr><tr><td><span>Options</span></td><td><span>Rarely used and poorly supported</span></td></tr></tbody></table></figure><h3><a name="ip-version-6-protocol" class="md-header-anchor"></a><span>IP Version 6 Protocol</span></h3><p><img src="Networking.assets/image-20200625114326058.png" alt="image-20200625114326058" style="zoom:50%;" /></p><figure><table><thead><tr><th><span>Field</span></th><th><span>Usage</span></th></tr></thead><tbody><tr><td><span>Version</span></td><td><span>6</span></td></tr><tr><td><span>Differentiated services</span></td><td><span>6 bits for service class + 2 bits for congestion control (ECN)</span></td></tr><tr><td><span>Flow label</span></td><td><span>Pseudo-Virtual Circuit identifier</span></td></tr><tr><td><span>Payload length</span></td><td><span>Bytes after the 40 byte header</span></td></tr><tr><td><span>Next header</span></td><td><span>Used to specify additional headers or Protocol (TCP/UDP)</span></td></tr><tr><td><span>Hop limit</span></td><td><span>Same as TTL (Time To Live)</span></td></tr><tr><td><span>Source</span></td><td><span>16 bytes IPv6 addresses</span></td></tr><tr><td><span>Destination</span></td><td><span>16 bytes IPv6 addresses</span></td></tr></tbody></table></figure><h2><a name="subnets" class="md-header-anchor"></a><span>Subnets</span></h2><ul><li><p><span>Prefix can be used to indicate different destination within an organisation to maximise the use of their assigned IP prefix</span></p></li><li><p><span>Subnetting </span></p><ul><li><p><span>allows networks to be split into several parts for internal use </span></p></li><li><p><span>acting like a single network for external use</span></p></li><li><p><span>allows future changes without any external impact</span></p><ul><li><span>No need to request additional IP address allocation</span></li><li><span>Routing on the internet does not change, only internally</span></li></ul></li><li><p><span>is hierarchical</span></p><ul><li><span>ISP -&gt; organisations -&gt; departments -&gt; teams</span></li><li><span>Very similar to route aggregation among “top-level” networks</span></li></ul></li></ul></li><li><p><strong><span>Subnet masks</span></strong><span> can be written using:</span></p><ul><li><span>“dotted decimal”(e.g. 255.255.255.128) or</span></li><li><span>“slash”notation (e.g. /25)</span></li></ul></li><li><p><span>Splits don’t need to be equal, but bits must be aligned to split the address into “network” and “host” portions</span></p></li></ul><h3><a name="subnet-routing" class="md-header-anchor"></a><span>Subnet Routing</span></h3><p><img src="Networking.assets/image-20200625120140330.png" alt="image-20200625120140330" style="zoom:50%;" /></p><ul><li><p><span>When a packet arrives from the internet, the router can use the subnet masks (bitwise AND) to find which subnet it should send the packet to, without knowing all hosts on the subnet</span></p><ul><li><strong><span>Incoming</span></strong><span>: </span><code>10000000.11010000.00000010.10010111</code></li><li><strong><span>CS Subnet Mask</span></strong><span>: </span><code>11111111.11111111.10000000.00000000</code></li><li><strong><span>Result</span></strong><span>:  </span><code>10000000.11010000.00000000.00000000</code></li><li><strong><span>CS Network</span></strong><span>: </span><code>10000000.11010000.10000000.00000000</code></li></ul></li></ul><figure><table><thead><tr><th><span>Network</span></th><th><span>Prefix</span></th><th><span>Network Address (binary)</span></th><th><span>Subnet Mask</span></th><th><span>Binary Subnet Mask</span></th></tr></thead><tbody><tr><td><span>EE</span></td><td><span>128.208.0.0/18</span></td><td><code>10000000.11010000.00000000.00000000</code></td><td><span>255.255.192.0</span></td><td><code>11111111.11111111.11000000.00000000</code></td></tr><tr><td><span>CS</span></td><td><span>128.208.128.0/17</span></td><td><code>10000000.11010000.10000000.00000000</code></td><td><span>255.255.128.0</span></td><td><code>11111111.11111111.10000000.00000000</code></td></tr><tr><td><span>Arts</span></td><td><span>128.208.96.0/19</span></td><td><code>10000000.11010000.01100000.00000000</code></td><td><span>255.255.224.0</span></td><td><code>11111111.11111111.11100000.00000000</code></td></tr></tbody></table></figure><h2><a name="network-address-translation-nat" class="md-header-anchor"></a><span>Network Address Translation (NAT)</span></h2><p><img src="Networking.assets/image-20200625121157561.png" alt="image-20200625121157561" style="zoom:50%;" /></p><ul><li><p><span>NAT </span><strong><span>allows</span></strong><span> an IP address to handle many more</span></p><ul><li><span>an ISP with a /16 allocation can only handle 65,534 hosts</span></li></ul></li><li><p><span>NAT was that stop gap to solve the exhaustion of IPv4 address</span></p></li><li><p><span>Each customer/home is assigned one “</span><strong><span>public</span></strong><span>” IP address</span></p></li><li><p><span>Internally hosts/interfaces are issued </span><strong><span>private</span></strong><span> IP addresses</span></p><ul><li><span>Internal IP addresses are used for communicating amongst hosts in the Local Area Network (LAN)</span></li><li><span>They must never be used on the public internet</span></li><li><span>When a packet is heading out of the network (to the ISP) the internal address is “translated” to the public IP address</span></li></ul></li></ul><h3><a name="how-nat-works" class="md-header-anchor"></a><span>How NAT works</span></h3><ul><li><p><strong><span>Assumption</span></strong><span>: TCP or UDP (+few others), in particular source and destination ports</span></p></li><li><p><span>Send:</span></p><ul><li><p><span>NAT box replaces TCP source address (10.x.y.z) with public IP address</span></p></li><li><p><span>TCP source port replaced with index of entry in NAT translation table</span></p><ul><li><span>One of 65,536 entries (16 bits – same as TCP port field)</span></li><li><span>Each entry contains: private IP, private source port, public source port</span></li></ul></li><li><p><span>IP and TCP checksums are recalculated because headers have been changed</span></p></li></ul></li><li><p><span>Receive:</span></p><ul><li><span>When a packet arrives from the internet at the NAT box it looks up the destination port from the TCP header in the translation table</span></li><li><span>Retrieves original source port and source IP address, updates headers and checksums and sends to the internal host</span></li></ul></li></ul><h3><a name="advantages" class="md-header-anchor"></a><span>Advantages</span></h3><ul><li><p><span>Significant </span><strong><span>security advantage</span></strong></p><ul><li><span>Since packets can only be received once an outgoing connection has been created, the internal network is greatly shielded from attacks</span>
<span>from incoming unsolicited packets</span></li></ul></li><li><p><span>Likely to remain in use even after IPv6 is widely deployed and there is no longer a scarcity of IP addresses</span></p></li></ul><h3><a name="criticisms" class="md-header-anchor"></a><span>Criticisms</span></h3><ul><li><p><strong><span>Violates IP architectural model</span></strong><span>: every interface on the network should have a unique IP address</span></p><ul><li><span>millions of interfaces connecting to the internet have 10.0.0.1</span></li></ul></li><li><p><strong><span>Breaks end-to-end connectivity</span></strong></p><ul><li><span>an interface in the private network can only receive packets once it has sent packets out and created a table entry</span></li></ul></li><li><p><span>Changes internet from </span><strong><span>connectionless to partly connection-oriented</span></strong></p><ul><li><span>NAT maintains connection state, if it crashes all connections are lost</span></li></ul></li><li><p><strong><span>Violates layer model</span></strong><span> by assuming nature of payload contents</span></p><ul><li><span>initially only worked for TCP and UDP</span></li></ul></li><li><p><span>Causes problems with FTP and other protocols that </span><strong><span>use multiple connections</span></strong><span> in a prescribed way</span></p></li><li><p><strong><span>Limits number of outgoing connection</span></strong></p></li></ul><h2><a name="fragmentation" class="md-header-anchor"></a><span>Fragmentation</span></h2><ul><li><p><span>Fragmentation allows network gateways to meet size constraints</span></p><ul><li><p><span>All networks have a maximum size for packets</span></p><ul><li><span>1500 bytes for Ethernet</span></li><li><span>2304 bytes for 802.11 (WiFi)</span></li></ul></li><li><p><span>Hosts want to transmit large packets</span></p><ul><li><span>Reduces workload for them, as each packet causes overhead</span></li></ul></li><li><p><span>When that packet transits other networks that may not support such a large packet size</span></p></li></ul></li><li><p><strong><span>Motivation</span></strong></p><ul><li><span>hardware</span></li><li><span>OS</span></li><li><span>protocols</span></li><li><span>standards compliance</span></li><li><span>desire to reduce transmissions due to errors</span></li><li><span>desire for efficiency in communication channel</span></li></ul></li><li><p><strong><span>Maximum Transmission Unit</span></strong><span>(MTU)</span></p><ul><li><p><span>Maximum size for that network or protocol</span></p></li><li><p><strong><span>Path MTU</span></strong></p><ul><li><span>Maximum size for the path through the network</span></li><li><span>Min of MTU on each link / network</span></li><li><span>Hard to determine path MTU in a connectionless network</span></li></ul></li></ul></li><li><p><strong><span>Problem</span></strong><span>: breaking a large packet into smaller fragments is easy, putting them back together again is hard </span></p></li><li><p><strong><span>Approaches</span></strong></p><ul><li><p><span>Transparent Fragmentation</span></p><ul><li><span>reassembly is performed at next router</span></li><li><span>subsequent routers are unaware fragmentation has taken</span>
<span>place</span></li></ul></li><li><p><span>Non-transparent Fragmentation</span></p><ul><li><span>reassembly is performed at the destination host</span></li></ul></li></ul></li></ul><p><img src="Networking.assets/image-20200625125306632.png" alt="image-20200625125306632" style="zoom:50%;" /></p><h3><a name="fragmentation-and-ip-headers" class="md-header-anchor"></a><span>Fragmentation and IP Headers</span></h3><p><img src="Networking.assets/image-20200625111613411-1593233219026.png" alt="image-20200625111613411" style="zoom: 67%;" /></p><ul><li><p><strong><span>Identification</span></strong><span>: used to identify a packet</span></p></li><li><p><strong><span>Flags</span></strong></p><ul><li><span>DF=Don’t Fragment</span></li><li><span>MF=More Fragments)</span></li></ul></li><li><p><strong><span>Fragment offset</span></strong><span>: offset in 8 byte blocks</span></p><ul><li><span>13 bits – max offset (2^13 – 1) * 8 = 65,528</span></li><li><span>must be on an 8 byte boundary</span></li><li><span>Cannot send single byte fragments, except last fragment</span></li><li><span>allows the receiving host to reconstruct out-of-order fragments in a buffer</span></li></ul></li><li><p><span>If a packet is fragmented</span></p><ul><li><span>Identification stays the same for all fragments</span></li><li><code>MF=1</code><span> for all fragments, except the last</span></li><li><span>Fragment offset – appropriately set for each fragment</span></li></ul></li></ul><h4><a name="example" class="md-header-anchor"></a><span>Example</span></h4><p><span>If we have a payload of 1700 bytes. MTU=1500 bytes, ID=1:</span></p><ul><li><span>1st Fragment : ID = 1, DF=0, MF=1, FO=0</span></li><li><span>2nd Fragment: ID = 1, DF=0, MF=0 , FO = 185 (185*8=1480 + 20 byte header = 1500)</span></li><li><span>Minimum IP header length = 20 bytes = five 32-bit increments</span></li></ul><h4><a name="downsides" class="md-header-anchor"></a><span>Downsides</span></h4><ul><li><p><strong><span>Overhead</span></strong><span> from fragmentation is incurred from the point of fragmentation all the way to the host</span></p><ul><li><span>20 byte header for each fragment</span></li></ul></li><li><p><span>If a single fragment is lost the entire packet has to be resent</span></p></li><li><p><span>Overhead on hosts in performing reassembly higher than expected</span></p></li></ul><h3><a name="path-mtu-discovery" class="md-header-anchor"></a><span>Path MTU discovery</span></h3><ul><li><span>Each packet is sent with the DF bit set – don’t fragment</span></li><li><span>If a router cannot handle the packet size it sends an ICMP (Internet Control Message Protocol) to the sender host telling it to fragment</span>
<span>its packets to a smaller size</span></li></ul><h3><a name="ipv4-vs-ipv6-fragmentation" class="md-header-anchor"></a><span>IPv4 vs. IPv6 Fragmentation</span></h3><ul><li><p><span>IPv4 allows for either </span><strong><span>non-transparent</span></strong><span> fragmentation, or path </span><strong><span>MTU discovery</span></strong></p><ul><li><strong><span>Minimum MTU</span></strong><span>: IPv4 minimum accept size 576 bytes</span></li></ul></li><li><p><span>IPv6 expects hosts to discover the optimal path MTU, routers will not perform fragmentation in IPv6</span></p><ul><li><strong><span>Minimum MTU</span></strong><span>: Pv6 minimum accept size 1280 bytes</span></li></ul></li><li><p><span>Caution</span></p><ul><li><p><span>ICMP messages are sometimes dropped by networks, causing Path MTU discovery to fail</span></p></li><li><p><span>in such circumstances a connection will work for low volume, fails at high volume</span></p><ul><li><span>if in doubt send at the minimum accept size</span></li></ul></li></ul></li></ul><h2><a name="ip-multicasting" class="md-header-anchor"></a><span>IP Multicasting</span></h2><ul><li><p><span>Allows a </span><strong><span>one-to-many</span></strong><span> communication, ideal for</span></p><ul><li><p><span>Streaming live content</span></p><ul><li><span>Video conferences</span></li></ul></li><li><p><span>Sending updates to a group of machines</span></p></li></ul></li><li><p><span>Class D addresses are </span><strong><span>reserved</span></strong><span> for multicasting</span></p><ul><li><span>Groups are identified by an IP address (can handle 250 million groups)</span></li></ul></li><li><p><span>To send a multicast packet it is sent to the multicast IP address</span></p><ul><li><code>224.0.0.0/24</code><span> reserved on local networks (routers do not send off LAN)</span></li><li><code>224.0.0.1</code><span> All systems on a LAN, </span></li><li><code>224.0.0.2</code><span> All routers on a LAN</span></li></ul></li><li><p><strong><span>Join a group</span></strong><span>: To join a group, a process asks its host to join a particular multicast IP address, the host records this</span></p></li><li><p><strong><span>leave a group</span></strong><span>: A process can also ask the host to leave the group, once no processes remain that are interested in the group the host is no longer a member</span></p></li><li><p><span>About once a minute a multicast router will broadcast a packet asking all hosts which multicast addresses they are members of</span></p><ul><li><span>using the multicast address </span><code>224.0.0.1</code></li><li><span>Each host responds with the multicast addresses of the groups it is a member of</span></li></ul></li><li><p><span>These messages are governed by the Internet Group Management Protocol</span></p></li><li><p><strong><span>Multicast routing algorithms</span></strong></p><ul><li><span>Special multicast routing algorithms are used to construct the routing trees to deliver messages from one sender to all receivers</span></li></ul></li><li><p><strong><span>Amplification attacks</span></strong><span>: Presents a security risk through amplification attacks</span></p><ul><li><span>for example, sending ICMP echo messages to a multicast address</span></li></ul></li><li><p><strong><span>Deployment</span></strong></p><ul><li><p><strong><span>Widely deployed</span></strong><span> within organisational networks</span></p><ul><li><span>Universities – delivering campus wide video content</span></li></ul></li><li><p><span>Generally </span><strong><span>not available</span></strong><span> to the average consumer on the internet</span></p><ul><li><span>Adds complexity to network equipment</span></li><li><span>Not proven to scale to internet size (i.e. millions of users)</span></li></ul></li></ul></li></ul><h2><a name="congestion-control" class="md-header-anchor"></a><span>Congestion Control</span></h2><ul><li><p><strong><span>Congestion Collapse</span></strong><span>: If too many packets are placed onto a network it will cause delay and ultimately packet loss, leading to congestion collapse</span></p><ul><li><span>Congestion collapse occurs when the performance plummets</span></li><li><span>Congestion can become self-fulfilling, if packets are delayed they could be resent, leading to yet more traffic</span></li></ul></li></ul><p><img src="Networking.assets/image-20200626105312271.png" alt="image-20200626105312271" style="zoom:50%;" /></p><h3><a name="congestion-control-vs-flow-control" class="md-header-anchor"></a><span>Congestion Control vs. Flow Control</span></h3><ul><li><p><strong><span>Congestion control</span></strong><span> is a network problem</span></p><ul><li><span>Aims to avoid overloading the network</span></li></ul></li><li><p><strong><span>Flow control</span></strong><span> is between one host and another</span></p><ul><li><span>Aims to avoid overloading the receiver</span></li></ul></li><li><p><span>The solution to both is to </span><strong><span>slow the sending rate</span></strong></p></li></ul><blockquote><p><span>Tutorial 6 Question 1</span></p><ul><li><p><span>What is the difference between congestion control and flow control? </span></p></li><li><p><span>flow-control service is used to eliminate the possibility of the sender overflowing the receiver’s buffer.</span></p><ul><li><span>Flow control is thus a speed-matching service - matching the rate at which the sender is sending against the rate at which the receiving application is reading.</span></li><li><span>A TCP sender can also be throttled due to congestion within the IP network; this form of sender control is referred to as congestion control.</span></li></ul></li><li><p><span>What methods (as discussed in the lectures) are used in TCP to provide each</span>
<span>functionality?</span></p></li><li><p><span>flow-control: Sliding Window protocols</span></p></li><li><p><span>congestion control: Slow Start, Congestion Avoidance and Fast Recovery algorithms</span></p></li></ul></blockquote><h3><a name="congestion-control-solutions" class="md-header-anchor"></a><span>Congestion Control Solutions</span></h3><p><img src="Networking.assets/image-20200626105514915.png" alt="image-20200626105514915" style="zoom:50%;" /></p><ul><li><p><span>Network Provisioning</span></p><ul><li><span>Ultimate solution, add more capacity, slow and expensive</span></li></ul></li><li><p><span>Traffic-aware routing</span></p><ul><li><span>Temporarily solution, eventually all routes become saturated</span></li></ul></li><li><p><span>Admission control</span></p><ul><li><span>Used on virtual circuits to control who can place traffic onto the route</span></li></ul></li><li><p><span>Traffic Throttling</span></p><ul><li><p><strong><span>Aim</span></strong><span> is congestion avoidance: Avoid ever reaching a point of congestion that could cause congestion collapse</span></p></li><li><p><strong><span>Problem</span></strong></p><ul><li><p><span>How to determine when the onset of congestion is taking place</span></p><ul><li><span>Monitor queuing delay at the router – most effective approach</span></li></ul></li><li><p><span>How to determine which sender is causing it</span></p><ul><li><span>Need to ensure notification does not create further congestion</span></li></ul></li></ul></li><li><p><span>Reduce sending rate</span></p></li><li><p><span>effective and reasonably fair</span></p></li></ul></li><li><p><span>Load shedding</span></p><ul><li><span>Effective at solving congestion</span></li><li><span>bad for utility of the network</span></li></ul></li></ul><h3><a name="explicit-congestion-control---ecn" class="md-header-anchor"></a><span>Explicit Congestion Control - ECN</span></h3><p><img src="Networking.assets/image-20200626110423209.png" referrerpolicy="no-referrer" alt="image-20200626110423209"></p><figure><table><thead><tr><th><span>Field</span></th><th><span>Usage</span></th></tr></thead><tbody><tr><td><span>Version</span></td><td><span>Protocol version 4</span></td></tr><tr><td><span>IHL</span></td><td><span>Header length in 32 bit words(min 5, max 15)</span></td></tr><tr><td><span>Differentiated services</span></td><td><span>6 bits for service class + </span><strong><span>2 bits for congestion control (ECN)</span></strong></td></tr></tbody></table></figure><ul><li><p><span>Two least significant bits in DiffServ header field</span></p><ul><li><code>00</code><span> – not ECN-capable</span></li><li><code>10</code><span> or 01 – ECN-capable</span></li><li><code>11</code><span> – congestion experienced</span></li></ul></li><li><p><strong><span>Receiver</span></strong><span>: When a receiver receives an IP packet marked as experiencing congestion it echoes to the sender a TCP segment with the </span><code>ECE</code><span> bit set</span></p></li><li><p><strong><span>Sender</span></strong><span>: </span></p><ul><li><span>The sender reduces it transmission rate and </span></li><li><span>sets the </span><a href='https://github.com/Haswf/ComputerSystemNote/blob/master/Note.md#path-mtu-discovery'><span>CWR (Congestion Window Reduced)</span></a><span> bit to acknowledge the </span><code>ECE</code></li></ul></li><li><p><span>On receipt of a TCP segment with CWR set, the receiver stops sending the </span><code>ECE</code><span> bit (unless </span><code>CE</code><span> flag set in IP packet)</span></p><ul><li><span>the receiver will keep sending segments with </span><code>ECE</code><span> bit set unless the sender has acknowledge the </span><code>ECE</code></li></ul></li><li><p><span>ECN is closely linked to TCP, and runs between </span><strong><span>the Internet</span></strong><span> and </span><strong><span>Transport layer</span></strong></p><ul><li><p><span>Again demonstrating the blurred lines between layers in TCP/IP</span></p></li><li><p><span>UDP could theoretically use ECN</span></p><ul><li><span>most network implementation do not give access to the </span><code>ECN</code><span> bits to allow application layer protocols to make use of them</span></li></ul></li></ul></li></ul><h2><a name="internet-control-protocols" class="md-header-anchor"></a><span>Internet Control Protocols</span></h2><h3><a name="icmp----internet-control-message-protocol" class="md-header-anchor"></a><span>ICMP – Internet Control Message Protocol</span></h3><figure><table><thead><tr><th><span>Message Type</span></th><th><span>Description</span></th></tr></thead><tbody><tr><td><span>Destination Unreachable</span></td><td><span>Packed could not be delivered</span></td></tr><tr><td><span>Time exceeded</span></td><td><span>Time to live field hit 0</span></td></tr><tr><td><span>Parameter problem</span></td><td><span>Invalid header field</span></td></tr><tr><td><span>Source quench</span></td><td><span>Choke packet</span></td></tr><tr><td><span>Redirect</span></td><td><span>Teach a router about geography</span></td></tr><tr><td><span>Echo and echo reply</span></td><td><span>Check if a machine is alive</span></td></tr><tr><td><span>Timestamp request/reply</span></td><td><span>Same as Echo, but with timestamp</span></td></tr><tr><td><span>Router advertisement/solicitation</span></td><td><span>Find a nearby router</span></td></tr></tbody></table></figure><h4><a name="traceroute" class="md-header-anchor"></a><span>Traceroute</span></h4><ul><li><span>Traceroute sends out packets to the same destination, each with </span><strong><span>an incremented TTL</span></strong></li><li><span>Counters will hit zero at successive routers, causing the router to return a Time exceeded message, revealing the IP address of the router</span></li><li><span>Sender can use this information to determine path and timings of the route a packet will take</span></li></ul><h3><a name="dhcp----dynamic-host-configuration-protocol" class="md-header-anchor"></a><span>DHCP – Dynamic Host Configuration Protocol</span></h3><ul><li><p><span>DHCP is an </span><strong><span>application layer protocol</span></strong></p><blockquote><ul><li><p><span>DHCP is considered an application layer program since it uses </span><strong><span>UDP transport layer protocol</span></strong><span> to accomplish its work and therefore must reside at a higher layer in the network stack. </span></p></li><li><p><span>DHCP is an application that allows a client to request a dynamically assigned address on the local network segment. </span></p></li><li><p><span>If the DHCP server is located on another segment, a helper address must be configured in a router on the local segment. </span></p><ul><li><span>This allows a request to be broadcast from the client using only the address 255.255.255.255 using a source address of 0.0.0.0 and an offer to be broadcast back to the client in the same way.</span></li></ul></li></ul><p><span> </span><a href='https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol'><span>Source</span></a></p></blockquote></li><li><p><strong><span>Task</span></strong><span>: DHCP automatically allocates IP address</span></p></li><li><p><span>Few networks manually configure each host</span></p><ul><li><span>Difficult to administer, error prone</span></li><li><span>Slow to respond to new devices</span></li></ul></li><li><p><span>Security concerns</span></p><ul><li><span>connecting any device will issue an IP address</span></li><li><span>can apply restrictions</span></li></ul></li></ul><h4><a name="how-dhcp-works" class="md-header-anchor"></a><span>How DHCP works?</span></h4><p><img src="Networking.assets/CSF-Images.4.13.png" referrerpolicy="no-referrer" alt="Sequence of DHCP messages across a network"></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">- Network has a DHCP server for issuing IP addresses</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre><ol start='' ><li><p><span>Host sends out a DHCP DISCOVER packet</span></p><ul><li><span>Routers can be configured to relay these to the </span><code>DHCP</code><span> server if not directly connected to the same network</span></li></ul></li><li><p><code>DHCP</code><span> Server receives the request and responds with a </span><code>DHCP OFFER</code><span> packet containing an available IP address</span></p><ul><li><span>IP addresses are typically issued </span><strong><span>on a lease</span></strong></li><li><span>Hosts can request a renewal before the lease expires</span></li></ul></li><li><p><span>Alternatively, IP address can be tied to a layer-2 address</span></p></li><li><p><span>Also sets several other parameters</span></p><ul><li><span>Default gateway</span></li><li><span>DNS servers address</span></li><li><span>time servers</span></li><li><span>even the </span><strong><span>kernel</span></strong><span>: When booting from network, DHCP can be used to specify the kernel/operating system.</span></li></ul></li></ol><h3><a name="arp----address-resolution-protocol-not-strictly-internet-layer" class="md-header-anchor"></a><span>ARP – Address Resolution Protocol (not strictly internet layer)</span></h3><ul><li><p><span>ARP is layer 2 protocol (</span><strong><span>Directly over Ethernet / link layer</span></strong><span>).</span></p><ul><li><span>a broadcast is sent on layer 2 (data link layer) and ARP will normally not traverse to layer 3 (network layer). </span></li><li><span>However it can provide extra features to the layer 3 protocol.</span></li></ul></li><li><p><span>The truth is that not all protocols fit the OSI model exactly, because after all it&#39;s just a model</span></p><ul><li><span>It fits layer 2, but doesn&#39;t fit layer 3 completely.</span></li></ul></li></ul><h4><a name="address-resolution-protocol" class="md-header-anchor"></a><span>Address Resolution Protocol</span></h4><ul><li><p><span>ARP </span><strong><span>translates</span></strong><span> addresses between the internet layer and the physical network layer</span></p><ul><li><span>It allows a host or router to translate an IP address of someone on its network into a layer 2 (MAC/physical) address</span></li></ul></li></ul><h4><a name="how-does-arp-work" class="md-header-anchor"></a><span>How does ARP work?</span></h4><ol start='' ><li><span>Broadcasts an Ethernet (or other layer 2) packet asking who owns the target IP address</span></li><li><span>Broadcast arrives at every host on the network, the owner will respond with its MAC address</span></li></ol><p><img src="Note.assets/image-20200626113259904.png" referrerpolicy="no-referrer" alt="image-20200626113259904"></p><h1><a name="link-layer" class="md-header-anchor"></a><span>Link Layer</span></h1><ul><li><p><strong><span>Old ethernet</span></strong><span> like WiFi</span></p><ul><li><span>Shared medium: can’t choose between different output ports</span></li><li><span>Just broadcast a packet</span></li><li><span>If someone else transmits at the same time, there is a “collision”</span></li><li><span>Mechanisms to try to reduce collisions called “medium access control”</span></li></ul></li><li><p><strong><span>Modern ethernet</span></strong></p><ul><li><span>“I have no idea what the link layer will be like in 20 years, but I know it will be ethernet”</span></li><li><span>Packet format / services kept, so software doesn’t need to change</span></li></ul></li></ul><h2><a name="mac-layer-2-address" class="md-header-anchor"></a><span>MAC (layer-2) Address</span></h2><ul><li><p><span>A layer 2 / MAC address is</span></p><ul><li><span>A globally unique identifier for the interface (hard-coded by the manufacturer)</span></li><li><span>Between 48 and 64 bits long</span></li><li><span>Addressing used at the Host-to-network/data link layer</span></li><li><span>Sometimes called physical address</span></li></ul></li><li><p><span>Layer 2 addresses are often </span><strong><span>incorrectly</span></strong><span> called MAC (Medium Access Control) addresses</span></p><ul><li><span>Layer 2 WiFi addresses are </span><strong><span>true</span></strong><span> MAC addresses</span></li></ul></li><li><p><span>Modern ethernet like IP (except “routers” called “switches”)</span></p></li></ul><p>&nbsp;</p></div>
</body>
</html>